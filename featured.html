<!DOCTYPE HTML>
<!--
	MedCityAI - Featured Publications
-->
<html>
	<head>
		<title>Featured Publications - Med City AI</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<link rel="stylesheet" href="assets/css/navigation.css" />
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
		<style>
	/* Body Styles */
	body {
		background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("images/banner.jpg");
		background-attachment: fixed;
		background-position: center center;
		background-repeat: no-repeat;
		background-size: cover;
		min-height: 100vh;
		margin: 0;
		padding: 0;
	}		/* Page Header */
		.page-header {
		background: linear-gradient(rgba(37, 104, 190, 0.8), rgba(27, 76, 125, 0.8));
		padding: 120px 20px 60px;
		text-align: center;
		color: white;
			position: relative;
			overflow: hidden;
		}
		.page-header h1 {
			font-size: 3em;
			margin: 0 0 15px 0;
			font-weight: 800;
			text-shadow: 0 4px 18px rgba(0,0,0,0.28);
		}
	.page-header p {
		font-size: 1.1em;
		line-height: 1.7;
		margin: 0;
		opacity: 0.95;
	}		/* Featured Publications Container */
		.featured-container {
			max-width: 1200px;
			margin: -40px auto 80px;
			padding: 0 20px;
		}

	/* Featured Card */
	.featured-card {
		background: white;
		border-radius: 16px;
		box-shadow: 0 8px 24px rgba(0,0,0,0.1);
		padding: 40px;
		margin-bottom: 30px;
		transition: all 0.3s ease;
		position: relative;
		overflow: hidden;
	}
	.featured-card:hover {
		box-shadow: 0 12px 32px rgba(0,0,0,0.15);
	}		/* Featured Badge */
		.featured-badge {
			position: absolute;
			top: 20px;
			right: 20px;
			background: linear-gradient(135deg, #e74c3c, #c0392b);
			color: white;
			padding: 8px 16px;
			border-radius: 20px;
			font-size: 12px;
			font-weight: 700;
			text-transform: uppercase;
			display: flex;
			align-items: center;
			gap: 6px;
		}

		/* Card Content */
		.featured-card h2 {
			color: #2c3e50;
			font-size: 28px;
			margin: 0 0 15px 0;
			line-height: 1.4;
			padding-right: 120px;
		}
		.featured-card .meta {
			color: #7f8c8d;
			font-size: 14px;
			margin-bottom: 20px;
			display: flex;
			flex-wrap: wrap;
			gap: 15px;
		}
		.featured-card .meta-item {
			display: flex;
			align-items: center;
			gap: 6px;
		}
		.featured-card .authors {
			color: #7f8c8d;
			font-size: 14px;
			margin-bottom: 20px;
			font-style: italic;
		}

		/* Action Buttons */
		.action-buttons {
			display: flex;
			gap: 15px;
			flex-wrap: wrap;
		}
		.btn {
			padding: 8px 16px;
			border-radius: 6px;
			text-decoration: none;
			font-weight: 500;
			font-size: 13px;
			transition: all 0.3s ease;
			display: inline-flex;
			align-items: center;
			gap: 6px;
			border: none;
			cursor: pointer;
			color: #7f8c8d;
		}
		.btn-primary {
			background: transparent;
			color: #7f8c8d;
		}
		.btn-primary:hover {
			color: #3498db;
		}
		.btn-secondary {
			background: transparent;
			color: #7f8c8d;
			border: none;
		}
		.btn-secondary:hover {
			color: #3498db;
		}

		/* Loading State */
		.loading {
			text-align: center;
			padding: 60px 20px;
			color: #7f8c8d;
			font-size: 18px;
		}

		/* Empty State */
		.empty-state {
			text-align: center;
			padding: 80px 20px;
		}
		.empty-state i {
			font-size: 64px;
			color: #bdc3c7;
			margin-bottom: 20px;
		}
		.empty-state h3 {
			color: #2c3e50;
			font-size: 24px;
			margin-bottom: 10px;
		}
		.empty-state p {
			color: #7f8c8d;
			font-size: 16px;
		}

		/* Footer */
		footer {
			background: #2c3e50;
			color: white;
			text-align: center;
			padding: 30px 20px;
			margin-top: 60px;
		}
		footer p {
			margin: 0;
			font-size: 14px;
		}

		/* Responsive */
		@media (max-width: 768px) {
			.page-header h1 {
				font-size: 32px;
			}
			.page-header p {
				font-size: 16px;
			}
			.featured-card {
				padding: 25px;
			}
			.featured-card h2 {
				font-size: 22px;
				padding-right: 0;
			}
			.featured-badge {
				position: static;
				margin-bottom: 15px;
				width: fit-content;
			}
		}
		</style>
	</head>
	<body class="is-preload">

	<!-- Navigation -->
	<div id="navigation-placeholder" data-page="featured"></div>
	
	<!-- Page Header -->
		<div class="page-header">
			<svg class="hero-bg-blobs" width="100%" height="100%" viewBox="0 0 1440 300" style="position:absolute;top:0;left:0;width:100%;height:100%;z-index:0;pointer-events:none;" aria-hidden="true" role="presentation">
				<defs>
					<linearGradient id="blobGradient1" x1="0" y1="0" x2="1" y2="1">
						<stop offset="0%" stop-color="#3498db" stop-opacity="0.18"/>
						<stop offset="100%" stop-color="#b6c7e0" stop-opacity="0.12"/>
					</linearGradient>
					<linearGradient id="blobGradient2" x1="0" y1="1" x2="1" y2="0">
						<stop offset="0%" stop-color="#e3eaf3" stop-opacity="0.16"/>
						<stop offset="100%" stop-color="#2980b9" stop-opacity="0.10"/>
					</linearGradient>
				</defs>
				<g>
					<circle id="blob1" cx="200" cy="150" r="150" fill="url(#blobGradient1)">
						<animate attributeName="cx" values="200;1240;200" dur="15s" repeatCount="indefinite"/>
					</circle>
					<circle id="blob2" cx="1200" cy="120" r="120" fill="url(#blobGradient2)">
						<animate attributeName="cx" values="1200;200;1200" dur="16s" repeatCount="indefinite"/>
					</circle>
				</g>
			</svg>
	<h1 style="position:relative;z-index:1;">Coming Soon: Featured This Week</h1>
	<p style="position:relative;z-index:1; font-size: 1.1em; line-height: 1.7;">Publications featured each week based on user engagement</p>
	</div>		<!-- Featured Publications Container -->
		<div class="featured-container" id="featured-container">
			<div class="loading">
				<i class="fas fa-spinner fa-spin"></i> Loading featured publications...
			</div>
		</div>

		<!-- Footer -->
		<footer id="footer">
			<ul class="icons">
				<li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
				<li><a href="#" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
				<li><a href="#" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
				<li><a href="#" class="icon brands fa-dribbble"><span class="label">Dribbble</span></a></li>
				<li><a href="#" class="icon solid fa-envelope"><span class="label">Email</span></a></li>
			</ul>
			<ul class="copyright">
				<li>&copy; MedCityAI</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li><li><a href="terms_of_use.html" style="color: #999;">Terms</a> | <a href="privacy_policy.html" style="color: #999;">Privacy</a> | <a href="cookie_policy.html" style="color: #999;">Cookies</a></li>
			</ul>
		</footer>

		<!-- Scripts -->
		<script>
			
			// Parse CSV line handling quoted fields
			function parseCSVLine(line) {
				const result = [];
				let current = '';
				let inQuotes = false;
				
				for (let i = 0; i < line.length; i++) {
					const char = line[i];
					const nextChar = line[i + 1];
					
					if (char === '"') {
						if (inQuotes && nextChar === '"') {
							current += '"';
							i++;
						} else {
							inQuotes = !inQuotes;
						}
					} else if (char === ',' && !inQuotes) {
						result.push(current);
						current = '';
					} else {
						current += char;
					}
				}
				result.push(current);
				return result;
			}

			// Load and display featured publications
			async function loadFeaturedPublications() {
				const container = document.getElementById('featured-container');
				
				try {
					// Fetch from weekly featured JSON file (top 3 most-liked from prior week)
					const response = await fetch('featured_weekly.json?t=' + new Date().getTime());
					
					if (!response.ok) {
						throw new Error('Featured articles not available');
					}
					
					const data = await response.json();
					
					if (!data.articles || data.articles.length === 0) {
						container.innerHTML = `
							<div class="empty-state">
								<i class="fas fa-inbox"></i>
								<h3>No Featured Publications</h3>
								<p>Check back soon for highlighted research articles.</p>
							</div>
						`;
						return;
					}

					// Take only top 3 articles
					const articles = data.articles.slice(0, 3);
					
					// Add week information header
					let html = '';
					if (data.week_start && data.week_end) {
						const weekStart = new Date(data.week_start).toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
						const weekEnd = new Date(data.week_end).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
						html += `
							<div style="text-align: center; margin-bottom: 30px; padding: 15px; background: linear-gradient(135deg, rgba(231, 76, 60, 0.1), rgba(192, 57, 43, 0.1)); border-radius: 12px;">
								<h3 style="color: #e74c3c; margin: 0 0 5px 0; font-size: 1.2em;">
									<i class="fas fa-trophy"></i> Top Liked Articles
								</h3>
								<p style="color: #7f8c8d; margin: 0; font-size: 0.95em;">
									Week of ${weekStart} - ${weekEnd}
								</p>
							</div>
						`;
					}

					// Generate featured cards
					articles.forEach((article, index) => {
						const title = article.title || 'Untitled';
						const abstract = article.abstract || 'No abstract available.';
						const journal = article.journal || 'Unknown Journal';
						const pubdate = article.pubdate || 'Unknown Date';
						const authors = article.authors_display || article.authors || 'Unknown Authors';
						const url = article.url || '#';
						const pmid = article.pmid || '';
						const likes = article.likes || 0;
						const rank = index + 1;

						html += `
							<div class="featured-card">
								<div class="featured-badge">
									<i class="fas fa-trophy"></i>
									#${rank} MOST LIKED
								</div>
								<h2>${title}</h2>
								<div class="meta">
									<div class="meta-item">
										<i class="fas fa-book"></i>
										${journal}
									</div>
									<div class="meta-item">
										<i class="fas fa-calendar-alt"></i>
										${pubdate}
									</div>
									<div class="meta-item">
										<i class="fas fa-flask"></i>
										PMID: ${pmid}
									</div>
									<div class="meta-item" style="color: #e74c3c; font-weight: 600;">
										<i class="fas fa-heart"></i>
										${likes} likes
									</div>
								</div>
								<div class="authors">
									<i class="fas fa-users"></i> ${authors}
								</div>
								<div class="action-buttons">
									<a href="${url}" target="_blank" rel="noopener noreferrer" class="btn btn-primary">
										<i class="fas fa-external-link-alt"></i>
										View on PubMed
									</a>
									<button class="btn btn-secondary" onclick="shareArticle('${title.replace(/'/g, "\\'")}', '${url}')">
										<i class="fas fa-share-alt"></i>
										Share
									</button>
								</div>
							</div>
						`;
					});

					container.innerHTML = html;

				} catch (error) {
					console.error('Error loading featured publications:', error);
					container.innerHTML = `
						<div class="empty-state">
							<i class="fas fa-exclamation-triangle"></i>
							<h3>Featured Articles Coming Soon</h3>
							<p>Weekly featured articles will be available after the first automated update runs on Sunday.</p>
							<p style="font-size: 0.9em; color: #95a5a6; margin-top: 15px;">
								The system automatically identifies the top-liked articles from the prior week.
							</p>
						</div>
					`;
				}
			}

			// Share article function
			function shareArticle(title, url) {
				if (navigator.share) {
					navigator.share({
						title: title,
						url: url
					}).catch(err => console.log('Error sharing:', err));
				} else {
					// Fallback: copy to clipboard
					navigator.clipboard.writeText(url).then(() => {
						alert('Link copied to clipboard!');
					}).catch(err => {
						console.log('Error copying to clipboard:', err);
					});
				}
			}

		// Load publications on page load
		document.addEventListener('DOMContentLoaded', loadFeaturedPublications);
	</script>
	<script src="assets/js/navigation.js"></script>

	</body>
</html>
<!DOCTYPE HTML>
<!--
	MedCityAI - Featured Publications
-->
<html>
	<head>
		<title>Featured Publications - Med City AI</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
		<style>
		/* Body Styles */
		body {
			background: linear-gradient(135deg, #f5f7fa 0%, #e8ecef 100%);
			font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
			margin: 0;
			padding: 0;
		}

		/* Page Header */
		.page-header {
			background: linear-gradient(135deg, #3498db, #2980b9);
			padding: 120px 20px 60px;
			text-align: center;
			color: white;
		}
		.page-header h1 {
			font-size: 48px;
			margin: 0 0 15px 0;
			font-weight: 700;
		}
		.page-header p {
			font-size: 20px;
			margin: 0;
			opacity: 0.95;
		}

		/* Featured Publications Container */
		.featured-container {
			max-width: 1200px;
			margin: -40px auto 80px;
			padding: 0 20px;
		}

		/* Featured Card */
		.featured-card {
			background: white;
			border-radius: 16px;
			box-shadow: 0 8px 24px rgba(0,0,0,0.1);
			padding: 40px;
			margin-bottom: 30px;
			transition: all 0.3s ease;
			position: relative;
			overflow: hidden;
		}
		.featured-card:hover {
			transform: translateY(-5px);
			box-shadow: 0 12px 32px rgba(0,0,0,0.15);
		}

		/* Featured Badge */
		.featured-badge {
			position: absolute;
			top: 20px;
			right: 20px;
			background: linear-gradient(135deg, #e74c3c, #c0392b);
			color: white;
			padding: 8px 16px;
			border-radius: 20px;
			font-size: 12px;
			font-weight: 700;
			text-transform: uppercase;
			display: flex;
			align-items: center;
			gap: 6px;
		}

		/* Card Content */
		.featured-card h2 {
			color: #2c3e50;
			font-size: 28px;
			margin: 0 0 15px 0;
			line-height: 1.4;
			padding-right: 120px;
		}
		.featured-card .meta {
			color: #7f8c8d;
			font-size: 14px;
			margin-bottom: 20px;
			display: flex;
			flex-wrap: wrap;
			gap: 15px;
		}
		.featured-card .meta-item {
			display: flex;
			align-items: center;
			gap: 6px;
		}
		.featured-card .authors {
			color: #7f8c8d;
			font-size: 14px;
			margin-bottom: 20px;
			font-style: italic;
		}

		/* Action Buttons */
		.action-buttons {
			display: flex;
			gap: 15px;
			flex-wrap: wrap;
		}
		.btn {
			padding: 8px 16px;
			border-radius: 6px;
			text-decoration: none;
			font-weight: 500;
			font-size: 13px;
			transition: all 0.3s ease;
			display: inline-flex;
			align-items: center;
			gap: 6px;
			border: none;
			cursor: pointer;
			color: #7f8c8d;
		}
		.btn-primary {
			background: transparent;
			color: #7f8c8d;
		}
		.btn-primary:hover {
			color: #3498db;
		}
		.btn-secondary {
			background: transparent;
			color: #7f8c8d;
			border: none;
		}
		.btn-secondary:hover {
			color: #3498db;
		}

		/* Loading State */
		.loading {
			text-align: center;
			padding: 60px 20px;
			color: #7f8c8d;
			font-size: 18px;
		}

		/* Empty State */
		.empty-state {
			text-align: center;
			padding: 80px 20px;
		}
		.empty-state i {
			font-size: 64px;
			color: #bdc3c7;
			margin-bottom: 20px;
		}
		.empty-state h3 {
			color: #2c3e50;
			font-size: 24px;
			margin-bottom: 10px;
		}
		.empty-state p {
			color: #7f8c8d;
			font-size: 16px;
		}

		/* Footer */
		footer {
			background: #2c3e50;
			color: white;
			text-align: center;
			padding: 30px 20px;
			margin-top: 60px;
		}
		footer p {
			margin: 0;
			font-size: 14px;
		}

		/* Responsive */
		@media (max-width: 768px) {
			.page-header h1 {
				font-size: 32px;
			}
			.page-header p {
				font-size: 16px;
			}
			.featured-card {
				padding: 25px;
			}
			.featured-card h2 {
				font-size: 22px;
				padding-right: 0;
			}
			.featured-badge {
				position: static;
				margin-bottom: 15px;
				width: fit-content;
			}
			.nav-links {
				display: none !important;
			}
			.menu-icon {
				display: flex !important;
			}
		}
		</style>
	</head>
	<body class="is-preload">

	<!-- Navigation -->
	<nav class="top-bar" role="navigation" aria-label="Main navigation">
		<div class="top-bar-content">
			<div class="logo">
				<a href="index.html" style="text-decoration: none; border: none; outline: none;"><img src="images/medcityai_logo1.png" alt="MedCityAI Logo" style="height:48px; width:auto; display: block;" /></a>
			</div>
			<div class="nav-links" role="menubar">
				<a href="index.html" role="menuitem">New Today</a>
				<a href="search.html" role="menuitem">Search</a>
				<a href="featured.html" role="menuitem" aria-current="page">Featured</a>
				<a href="leaderboard.html" role="menuitem">Leaderboard</a>
				<a href="about.html" role="menuitem">About</a>
				<a href="#" role="menuitem" onclick="openKeywordsModal(); return false;">
					Keywords
				</a>
			</div>
			<div style="display: flex; align-items: center; gap: 15px;">
				<button class="menu-icon" aria-label="Toggle mobile menu" aria-expanded="false" aria-controls="mobile-menu">
					<span class="sr-only">Menu</span>
					<div aria-hidden="true"></div>
					<div aria-hidden="true"></div>
					<div aria-hidden="true"></div>
				</button>
			</div>
		</div>
	</nav>
	
	<!-- Mobile Menu -->
	<div id="mobile-menu" class="mobile-menu" aria-hidden="true">
		<a href="index.html">New Today</a>
		<a href="search.html">Search</a>
		<a href="featured.html">Featured</a>
		<a href="leaderboard.html">Leaderboard</a>
		<a href="about.html">About</a>
		<a href="#" onclick="openKeywordsModal(); return false;">Keywords</a>
	</div>
	
	<!-- Page Header -->
		<div class="page-header">
			<h1><i class="fas fa-star"></i> Featured Publications</h1>
			<p>Highlighted research from Mayo Clinic and affiliated institutions</p>
		</div>

		<!-- Featured Publications Container -->
		<div class="featured-container" id="featured-container">
			<div class="loading">
				<i class="fas fa-spinner fa-spin"></i> Loading featured publications...
			</div>
		</div>

		<!-- Footer -->
		<footer>
			<p>&copy; 2025 Med City AI. All rights reserved.</p>
		</footer>

		<!-- Scripts -->
		<script>
			// Mobile menu toggle
			document.addEventListener('DOMContentLoaded', function() {
				const menuIcon = document.querySelector('.menu-icon');
				const mobileMenu = document.getElementById('mobile-menu');
				
				if (menuIcon && mobileMenu) {
					menuIcon.addEventListener('click', function(e) {
						e.stopPropagation();
						const isExpanded = this.getAttribute('aria-expanded') === 'true';
						this.setAttribute('aria-expanded', !isExpanded);
						mobileMenu.classList.toggle('active');
						mobileMenu.setAttribute('aria-hidden', isExpanded);
					});
					
					// Close mobile menu when clicking outside
					document.addEventListener('click', function(event) {
						if (!event.target.closest('.menu-icon') && !event.target.closest('.mobile-menu')) {
							if (mobileMenu.classList.contains('active')) {
								mobileMenu.classList.remove('active');
								mobileMenu.setAttribute('aria-hidden', 'true');
								menuIcon.setAttribute('aria-expanded', 'false');
							}
						}
					});
					
					// Close mobile menu when clicking a link
					const mobileMenuLinks = mobileMenu.querySelectorAll('a');
					mobileMenuLinks.forEach(link => {
						link.addEventListener('click', function() {
							mobileMenu.classList.remove('active');
							mobileMenu.setAttribute('aria-hidden', 'true');
							menuIcon.setAttribute('aria-expanded', 'false');
						});
					});
				}
			});
			
			// Parse CSV line handling quoted fields
			function parseCSVLine(line) {
				const result = [];
				let current = '';
				let inQuotes = false;
				
				for (let i = 0; i < line.length; i++) {
					const char = line[i];
					const nextChar = line[i + 1];
					
					if (char === '"') {
						if (inQuotes && nextChar === '"') {
							current += '"';
							i++;
						} else {
							inQuotes = !inQuotes;
						}
					} else if (char === ',' && !inQuotes) {
						result.push(current);
						current = '';
					} else {
						current += char;
					}
				}
				result.push(current);
				return result;
			}

			// Load and display featured publications
			async function loadFeaturedPublications() {
				const container = document.getElementById('featured-container');
				
				try {
					const response = await fetch('pubmed_data.csv');
					const csvText = await response.text();
					const lines = csvText.trim().split('\n');
					
					if (lines.length <= 1) {
						container.innerHTML = `
							<div class="empty-state">
								<i class="fas fa-inbox"></i>
								<h3>No Featured Publications</h3>
								<p>Check back soon for highlighted research articles.</p>
							</div>
						`;
						return;
					}

					// Parse CSV
					const headers = parseCSVLine(lines[0]);
					const articles = [];
					
					for (let i = 1; i < lines.length; i++) {
						if (lines[i].trim()) {
							const values = parseCSVLine(lines[i]);
							const article = {};
							headers.forEach((header, index) => {
								article[header] = values[index] || '';
							});
							articles.push(article);
						}
					}

					// Display all articles as featured (you can add filtering logic here)
					if (articles.length === 0) {
						container.innerHTML = `
							<div class="empty-state">
								<i class="fas fa-inbox"></i>
								<h3>No Featured Publications</h3>
								<p>Check back soon for highlighted research articles.</p>
							</div>
						`;
						return;
					}

					// Generate featured cards
					let html = '';
					articles.forEach((article, index) => {
						const title = article.title || 'Untitled';
						const abstract = article.abstract || article.llm_summary || 'No abstract available.';
						const journal = article.journal || 'Unknown Journal';
						const pubdate = article.pubdate || 'Unknown Date';
						const authors = article.authors_display || article.authors || 'Unknown Authors';
						const url = article.url || '#';
						const pmid = article.pmid || '';

						html += `
							<div class="featured-card">
								<div class="featured-badge">
									<i class="fas fa-star"></i>
									FEATURED
								</div>
								<h2>${title}</h2>
								<div class="meta">
									<div class="meta-item">
										<i class="fas fa-book"></i>
										${journal}
									</div>
									<div class="meta-item">
										<i class="fas fa-calendar-alt"></i>
										${pubdate}
									</div>
									<div class="meta-item">
										<i class="fas fa-flask"></i>
										PMID: ${pmid}
									</div>
								</div>
								<div class="authors">
									<i class="fas fa-users"></i> ${authors}
								</div>
								<div class="action-buttons">
									<a href="${url}" target="_blank" rel="noopener noreferrer" class="btn btn-primary">
										<i class="fas fa-external-link-alt"></i>
										View on PubMed
									</a>
									<button class="btn btn-secondary" onclick="shareArticle('${title.replace(/'/g, "\\'")}', '${url}')">
										<i class="fas fa-share-alt"></i>
										Share
									</button>
								</div>
							</div>
						`;
					});

					container.innerHTML = html;

				} catch (error) {
					console.error('Error loading featured publications:', error);
					container.innerHTML = `
						<div class="empty-state">
							<i class="fas fa-exclamation-triangle"></i>
							<h3>Error Loading Publications</h3>
							<p>Unable to load featured publications. Please try again later.</p>
						</div>
					`;
				}
			}

			// Share article function
			function shareArticle(title, url) {
				if (navigator.share) {
					navigator.share({
						title: title,
						url: url
					}).catch(err => console.log('Error sharing:', err));
				} else {
					// Fallback: copy to clipboard
					navigator.clipboard.writeText(url).then(() => {
						alert('Link copied to clipboard!');
					}).catch(err => {
						console.log('Error copying to clipboard:', err);
					});
				}
			}

			// Load publications on page load
			document.addEventListener('DOMContentLoaded', loadFeaturedPublications);
		</script>

	</body>
</html>

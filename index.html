<!DOCTYPE html><!DOCTYPE html><!DOCTYPE HTML>

<html lang="en">

<head><html lang="en"><!--

    <meta charset="utf-8">

    <meta name="viewport" content="width=device-width, initial-scale=1"><head>	MedCityAI - Real-time research analytics

    <meta name="description" content="MedCityAI distills Rochester, Minnesota biomedical research into an actionable daily feed and insight hub.">

    <title>MedCityAI | Rochester Research Intelligence</title>    <meta charset="utf-8">-->

    <link rel="preconnect" href="https://fonts.googleapis.com">

    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>    <meta name="viewport" content="width=device-width, initial-scale=1"><html lang="en">

    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Space+Grotesk:wght@500;700&display=swap" as="style">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Space+Grotesk:wght@500;700&display=swap">    <meta name="description" content="MedCityAI distills Rochester, Minnesota biomedical research into an actionable daily feed and insight hub.">	<head>

    <link rel="stylesheet" href="assets/css/fontawesome-all.min.css">

    <noscript><link rel="stylesheet" href="assets/css/noscript.css"></noscript>    <title>MedCityAI | Rochester Research Intelligence</title>		<title>Med City AI - Rochester MN Biomedical Research</title>

    <style>

        :root {    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Space+Grotesk:wght@500;700&display=swap" as="style">		<meta charset="utf-8" />

            color-scheme: dark light;

            --bg-primary: #070b1a;    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Space+Grotesk:wght@500;700&display=swap">		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />

            --bg-secondary: #0f192f;

            --bg-tertiary: rgba(18, 31, 56, 0.82);    <link rel="stylesheet" href="assets/css/fontawesome-all.min.css">		<link rel="stylesheet" href="assets/css/main.css" />

            --surface-elevated: rgba(18, 28, 50, 0.88);

            --surface-card: rgba(21, 32, 56, 0.92);    <style>		<link rel="preconnect" href="https://fonts.googleapis.com" />

            --surface-border: rgba(255, 255, 255, 0.08);

            --accent: #4c8dff;        :root {		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

            --accent-soft: rgba(76, 141, 255, 0.16);

            --accent-strong: #66d4ff;            color-scheme: dark light;		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Space+Grotesk:wght@500;600&display=swap" rel="stylesheet" />

            --text-primary: #f7f9ff;

            --text-secondary: #b6c2dc;            --bg-primary: #070b1a;		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>

            --text-muted: #8090b1;

            --success: #44d19d;            --bg-secondary: #0f192f;		<style>

            --danger: #ff6b8a;

            --radius-lg: 22px;            --bg-tertiary: rgba(18, 31, 56, 0.82);		/* Modal for abstracts */

            --radius-md: 16px;

            --radius-sm: 10px;            --surface-elevated: rgba(18, 28, 50, 0.88);		.modal-bg {

            --shadow-soft: 0 18px 44px rgba(3, 8, 20, 0.45);

            --max-width: 1200px;            --surface-card: rgba(21, 32, 56, 0.92);			display: none;

            --transition: all 180ms ease;

        }            --surface-border: rgba(255, 255, 255, 0.08);			position: fixed;



        * {            --accent: #4c8dff;			top: 0; left: 0; width: 100vw; height: 100vh;

            box-sizing: border-box;

        }            --accent-soft: rgba(76, 141, 255, 0.16);			background: rgba(0,0,0,0.5);



        html, body {            --accent-strong: #66d4ff;			z-index: 3000;

            margin: 0;

            padding: 0;            --text-primary: #f7f9ff;			justify-content: center;

        }

            --text-secondary: #b6c2dc;			align-items: center;

        body {

            font-family: "Inter", "Segoe UI", -apple-system, BlinkMacSystemFont, sans-serif;            --text-muted: #8090b1;		}

            background: radial-gradient(circle at top, rgba(28, 45, 88, 0.8), transparent 55%), var(--bg-primary);

            color: var(--text-primary);            --success: #44d19d;		.modal-content {

            min-height: 100vh;

            line-height: 1.6;            --danger: #ff6b8a;			background: #fff;

        }

            --radius-lg: 22px;			border-radius: 10px;

        a {

            color: inherit;            --radius-md: 16px;			max-width: 600px;

            text-decoration: none;

        }            --radius-sm: 10px;			width: 90vw;



        img {            --shadow-soft: 0 18px 44px rgba(3, 8, 20, 0.45);			max-height: 80vh;

            max-width: 100%;

            display: block;            --max-width: 1200px;			overflow-y: auto;

        }

            --transition: all 180ms ease;			padding: 32px 24px 24px 24px;

        button, input, select, textarea {

            font: inherit;        }			box-shadow: 0 4px 24px rgba(0,0,0,0.18);

        }

			position: relative;

        .page-wrapper {

            width: 100%;        * {		}

        }

            box-sizing: border-box;		.modal-close {

        .site-header {

            position: sticky;        }			position: absolute;

            top: 0;

            z-index: 1000;			top: 12px;

            background: rgba(6, 10, 24, 0.86);

            backdrop-filter: blur(18px);        html, body {			right: 18px;

            border-bottom: 1px solid var(--surface-border);

        }            margin: 0;			font-size: 22px;



        .nav-shell {            padding: 0;			color: #333;

            max-width: var(--max-width);

            margin: 0 auto;        }			cursor: pointer;

            padding: 18px 24px;

            display: flex;			font-weight: bold;

            align-items: center;

            justify-content: space-between;        body {		}

            gap: 16px;

        }            font-family: 'Inter', 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;		.modal-abstract {



        .brand {            background: radial-gradient(circle at top, rgba(28, 45, 88, 0.8), transparent 55%), var(--bg-primary);			margin-top: 18px;

            display: inline-flex;

            align-items: center;            color: var(--text-primary);			font-size: 15px;

            gap: 12px;

            font-family: "Space Grotesk", sans-serif;            min-height: 100vh;			color: #222;

            font-weight: 600;

            letter-spacing: 0.02em;            line-height: 1.6;			line-height: 1.6;

            color: var(--text-primary);

        }        }		}



        .brand img {		.modal-abstract h4 {

            width: 42px;

            height: 42px;        a {			color: #0056a3;

            border-radius: 12px;

        }            color: inherit;			margin-top: 15px;



        .nav-links {            text-decoration: none;			margin-bottom: 10px;

            display: flex;

            align-items: center;        }			font-size: 16px;

            gap: 22px;

            color: var(--text-secondary);		}

            transition: var(--transition);

        }        img {		.modal-abstract strong {



        .nav-links a:hover,            max-width: 100%;			color: #333;

        .nav-links a:focus {

            color: var(--accent);            display: block;		}

        }

        }

        .nav-toggle {

            display: none;		/* Research results grid */

            align-items: center;

            justify-content: center;        button, input, select, textarea {		.results {

            width: 44px;

            height: 44px;            font: inherit;			max-width: 1200px;

            border-radius: 50%;

            border: 1px solid var(--surface-border);        }			margin: 40px auto;

            background: var(--surface-card);

            color: var(--text-primary);			padding: 0 20px;

        }

        .page-wrapper {			column-count: 3;

        .cta-button {

            padding: 12px 20px;            width: 100%;			column-gap: 20px;

            border-radius: 999px;

            background: linear-gradient(135deg, var(--accent), #6a7bff);        }		}

            color: #0c1021;

            font-weight: 600;		.result-item {

            box-shadow: 0 10px 24px rgba(80, 123, 255, 0.35);

            transition: var(--transition);        .site-header {			background: transparent;

        }

            position: sticky;			border-radius: 10px;

        .cta-button:hover,

        .cta-button:focus {            top: 0;			margin: 0 0 20px;

            transform: translateY(-1px);

            box-shadow: 0 16px 32px rgba(80, 123, 255, 0.45);            z-index: 1000;			display: inline-block;

        }

            background: rgba(6, 10, 24, 0.86);			width: 100%;

        .hero {

            max-width: var(--max-width);            backdrop-filter: blur(18px);			box-sizing: border-box;

            margin: 0 auto;

            padding: 104px 24px 56px;            border-bottom: 1px solid var(--surface-border);			position: relative;

            display: grid;

            grid-template-columns: repeat(12, 1fr);        }			perspective: 1000px;

            gap: 32px;

            align-items: center;			min-height: 200px;

        }

        .nav-shell {		}

        .hero-content {

            grid-column: span 7;            max-width: var(--max-width);		

        }

            margin: 0 auto;	.card-flip-container {

        .hero-eyebrow {

            display: inline-flex;            padding: 18px 24px;		position: relative;

            align-items: center;

            gap: 8px;            display: flex;		width: 100%;

            padding: 6px 14px;

            border-radius: 999px;            align-items: center;		min-height: 100%;

            background: var(--accent-soft);

            font-size: 0.85rem;            justify-content: space-between;		transition: transform 0.6s;

            color: var(--accent-strong);

            letter-spacing: 0.03em;            gap: 16px;		transform-style: preserve-3d;

            text-transform: uppercase;

        }        }	}



        .hero h1 {	

            font-family: "Space Grotesk", sans-serif;

            font-weight: 700;        .brand {	.card-flip-container.flipped {

            font-size: clamp(2.4rem, 4vw, 3.4rem);

            margin: 18px 0 18px;            display: inline-flex;		transform: rotateY(180deg);

            line-height: 1.12;

        }            align-items: center;	}



        .hero p {            gap: 12px;	

            font-size: 1.05rem;

            color: var(--text-secondary);            font-family: 'Space Grotesk', sans-serif;	.card-face {

            max-width: 560px;

            margin-bottom: 28px;            font-weight: 600;		width: 100%;

        }

            letter-spacing: 0.02em;		backface-visibility: hidden;

        .hero-actions {

            display: flex;            color: var(--text-primary);		-webkit-backface-visibility: hidden;

            flex-wrap: wrap;

            gap: 14px;        }		border-radius: 10px;

        }

		padding: 20px;

        .hero-actions a {

            display: inline-flex;        .brand img {		box-shadow: 0 4px 12px rgba(0,0,0,0.15);

            align-items: center;

            gap: 10px;            width: 42px;		background: #fff;

            padding: 12px 20px;

            border-radius: 999px;            height: 42px;		box-sizing: border-box;

            border: 1px solid transparent;

            font-weight: 600;            border-radius: 12px;	}

            transition: var(--transition);

        }        }	



        .hero-actions a.primary {	.card-front {

            background: linear-gradient(135deg, var(--accent), #7f6bff);

            color: #050b18;        .nav-links {		position: relative;

        }

            display: flex;		z-index: 2;

        .hero-actions a.secondary {

            border-color: var(--surface-border);            align-items: center;		cursor: pointer;

            background: rgba(13, 20, 39, 0.75);

            color: var(--text-primary);            gap: 22px;		overflow: hidden;

        }

            color: var(--text-secondary);	}

        .hero-actions a.secondary:hover,

        .hero-actions a.secondary:focus {            transition: var(--transition);	

            border-color: var(--accent);

            color: var(--accent);        }	.card-back {

        }

		position: absolute;

        .hero-media {

            grid-column: span 5;        .nav-links a:hover,		top: 0;

            position: relative;

        }        .nav-links a:focus {		left: 0;



        .hero-media::before {            color: var(--accent);		<style>

            content: "";

            position: absolute;        }:root {

            inset: -24px;

            background: radial-gradient(circle at top right, rgba(112, 177, 255, 0.32), transparent 65%);	--page-bg: #020714;

            filter: blur(20px);

            z-index: -1;        .nav-toggle {	--page-gradient: radial-gradient(circle at top, rgba(0,111,253,0.22), transparent 55%);

        }

            display: none;	--surface: rgba(10, 20, 48, 0.88);

        .hero-media img {

            border-radius: var(--radius-lg);            align-items: center;	--surface-solid: #0b1229;

            border: 1px solid rgba(255, 255, 255, 0.08);

            box-shadow: var(--shadow-soft);            justify-content: center;	--surface-elevated: #121b3d;

            object-fit: cover;

        }            width: 44px;	--surface-soft: rgba(13, 22, 48, 0.6);



        .metrics-section {            height: 44px;	--accent: #006FFD;

            max-width: var(--max-width);

            margin: 0 auto;            border-radius: 50%;	--accent-strong: #0057d6;

            padding: 24px;

        }            border: 1px solid var(--surface-border);	--accent-soft: rgba(0,111,253,0.12);



        .metrics-grid {            background: var(--surface-card);	--text-primary: #f5f8ff;

            display: grid;

            gap: 18px;            color: var(--text-primary);	--text-secondary: #c7d5f4;

            grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));

        }        }	--text-muted: #89a1d6;



        .metric-card {	--border: rgba(255,255,255,0.08);

            background: var(--surface-card);

            border: 1px solid var(--surface-border);        .cta-button {	--border-strong: rgba(0,111,253,0.3);

            border-radius: var(--radius-md);

            padding: 24px;            padding: 12px 20px;	--radius-lg: 28px;

            position: relative;

            overflow: hidden;            border-radius: 999px;	--radius-md: 18px;

        }

            background: linear-gradient(135deg, var(--accent), #6a7bff);	--radius-sm: 12px;

        .metric-card::after {

            content: "";            color: #0c1021;	--shadow-lg: 0 30px 70px rgba(2, 9, 30, 0.55);

            position: absolute;

            inset: 0;            font-weight: 600;	--shadow-md: 0 16px 40px rgba(2, 9, 30, 0.4);

            background: linear-gradient(135deg, rgba(76, 141, 255, 0.12), transparent 55%);

            pointer-events: none;            box-shadow: 0 10px 24px rgba(80, 123, 255, 0.35);	--shadow-soft: 0 10px 24px rgba(7, 20, 50, 0.35);

        }

            transition: var(--transition);	--transition: all 0.22s ease;

        .metric-label {

            font-size: 0.85rem;        }	--max-width: 1240px;

            color: var(--text-muted);

            text-transform: uppercase;}

            letter-spacing: 0.08em;

        }        .cta-button:hover,*,



        .metric-value {        .cta-button:focus {*::before,

            display: block;

            font-size: clamp(2.2rem, 3vw, 2.8rem);            transform: translateY(-1px);*::after {

            font-weight: 700;

            margin: 8px 0 4px;            box-shadow: 0 16px 32px rgba(80, 123, 255, 0.45);	box-sizing: border-box;

        }

        }}

        .metric-detail {

            color: var(--text-secondary);html,

            font-size: 0.95rem;

        }        .hero {body {



        .value-props {            max-width: var(--max-width);	height: 100%;

            max-width: var(--max-width);

            margin: 12px auto 64px;            margin: 0 auto;}

            padding: 0 24px;

        }            padding: 104px 24px 56px;body {



        .value-grid {            display: grid;	margin: 0;

            display: grid;

            gap: 22px;            grid-template-columns: repeat(12, 1fr);	font-family: 'Inter', 'Segoe UI', sans-serif;

            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));

        }            gap: 32px;	background: var(--page-bg);



        .value-card {            align-items: center;	background-image: var(--page-gradient);

            background: rgba(18, 28, 52, 0.72);

            border: 1px solid rgba(255, 255, 255, 0.06);        }	color: var(--text-secondary);

            border-radius: var(--radius-md);

            padding: 26px;	line-height: 1.6;

            backdrop-filter: blur(12px);

        }        .hero-content {	-webkit-font-smoothing: antialiased;



        .value-card h3 {            grid-column: span 7;}

            margin-top: 0;

            font-size: 1.15rem;        }body.landing {

            margin-bottom: 12px;

        }	background: var(--page-bg);



        .value-card p {        .hero-eyebrow {}

            margin: 0;

            color: var(--text-secondary);            display: inline-flex;a {

            font-size: 0.95rem;

        }            align-items: center;	color: inherit;



        .feed-section {            gap: 8px;	text-decoration: none;

            background: rgba(8, 13, 28, 0.85);

            border-top: 1px solid rgba(255, 255, 255, 0.05);            padding: 6px 14px;	transition: var(--transition);

            border-bottom: 1px solid rgba(255, 255, 255, 0.05);

        }            border-radius: 999px;}



        .feed-shell {            background: var(--accent-soft);a:hover,

            max-width: var(--max-width);

            margin: 0 auto;            font-size: 0.85rem;a:focus {

            padding: 60px 24px;

            display: grid;            color: var(--accent-strong);	color: var(--accent);

            grid-template-columns: 280px 1fr;

            gap: 32px;            letter-spacing: 0.03em;}

        }

            text-transform: uppercase;img {

        .filter-panel {

            background: var(--surface-elevated);        }	max-width: 100%;

            border: 1px solid var(--surface-border);

            border-radius: var(--radius-md);	display: block;

            padding: 26px 22px;

            display: flex;        .hero h1 {}

            flex-direction: column;

            gap: 22px;            font-family: 'Space Grotesk', sans-serif;#page-wrapper {

            position: sticky;

            top: 112px;            font-weight: 700;	position: relative;

            height: fit-content;

        }            font-size: clamp(2.4rem, 4vw, 3.4rem);	min-height: 100%;



        .filter-panel h2 {            margin: 18px 0 18px;	overflow: hidden;

            margin: 0 0 6px;

            font-size: 1.05rem;            line-height: 1.12;}

        }

        }.skip-link {

        .filter-group {

            display: flex;	position: absolute;

            flex-direction: column;

            gap: 10px;        .hero p {	top: -50px;

        }

            font-size: 1.05rem;	left: 16px;

        .filter-label {

            font-size: 0.85rem;            color: var(--text-secondary);	background: var(--accent);

            text-transform: uppercase;

            letter-spacing: 0.08em;            max-width: 560px;	color: #fff;

            color: var(--text-muted);

        }            margin-bottom: 28px;	padding: 12px 20px;



        .filter-panel input[type="search"],        }	text-decoration: none;

        .filter-panel select {

            width: 100%;	z-index: 1000;

            padding: 11px 14px;

            border-radius: 12px;        .hero-actions {	border-radius: var(--radius-sm);

            border: 1px solid rgba(255, 255, 255, 0.08);

            background: rgba(11, 17, 32, 0.9);            display: flex;	font-weight: 600;

            color: var(--text-primary);

        }            flex-wrap: wrap;	transition: top 0.3s ease;



        .filter-panel input[type="search"]::placeholder {            gap: 14px;}

            color: rgba(182, 194, 220, 0.6);

        }        }.skip-link:focus {



        .checkbox-row {	top: 16px;

            display: flex;

            align-items: center;        .hero-actions a {}

            gap: 10px;

            font-size: 0.95rem;            display: inline-flex;.site-nav {

            color: var(--text-secondary);

        }            align-items: center;	position: sticky;



        .checkbox-row input {            gap: 10px;	top: 0;

            width: 18px;

            height: 18px;            padding: 12px 20px;	z-index: 900;

        }

            border-radius: 999px;	backdrop-filter: blur(14px);

        .filter-actions {

            display: flex;            border: 1px solid transparent;	background: rgba(2, 7, 20, 0.88);

            gap: 10px;

            flex-wrap: wrap;            font-weight: 600;	border-bottom: 1px solid rgba(255,255,255,0.05);

        }

            transition: var(--transition);}

        .filter-actions button {

            flex: 1 1 120px;        }.site-nav__inner {

            padding: 10px 16px;

            border-radius: 20px;	max-width: var(--max-width);

            border: 1px solid rgba(255, 255, 255, 0.08);

            background: transparent;        .hero-actions a.primary {	margin: 0 auto;

            color: var(--text-primary);

            cursor: pointer;            background: linear-gradient(135deg, var(--accent), #7f6bff);	padding: 22px 32px;

            transition: var(--transition);

        }            color: #050b18;	display: flex;



        .filter-actions button:hover,        }	align-items: center;

        .filter-actions button:focus {

            border-color: var(--accent);	justify-content: space-between;

            color: var(--accent);

        }        .hero-actions a.secondary {	gap: 24px;



        .panel-footnote {            border-color: var(--surface-border);}

            font-size: 0.8rem;

            color: var(--text-muted);            background: rgba(13, 20, 39, 0.75);.brand {

            border-top: 1px solid rgba(255, 255, 255, 0.06);

            padding-top: 12px;            color: var(--text-primary);	display: flex;

            margin-top: 6px;

        }        }	align-items: center;



        .results-panel {	gap: 14px;

            display: flex;

            flex-direction: column;        .hero-actions a.secondary:hover,	font-weight: 700;

            gap: 24px;

        }        .hero-actions a.secondary:focus {	color: var(--text-primary);



        .results-header {            border-color: var(--accent);	font-size: 1rem;

            display: flex;

            justify-content: space-between;            color: var(--accent);	letter-spacing: 0.04em;

            gap: 16px;

            flex-wrap: wrap;        }	text-transform: uppercase;

        }

}

        .results-header h2 {

            margin: 0;        .hero-media {.brand img {

            font-size: 1.6rem;

        }            grid-column: span 5;	height: 46px;



        .results-summary {            position: relative;	width: auto;

            color: var(--text-secondary);

            font-size: 0.95rem;        }}

        }

.site-nav__links {

        .sort-control {

            display: inline-flex;        .hero-media::before {	display: flex;

            align-items: center;

            gap: 10px;            content: "";	align-items: center;

            background: rgba(18, 28, 48, 0.9);

            border: 1px solid rgba(255, 255, 255, 0.08);            position: absolute;	gap: 28px;

            padding: 6px 12px;

            border-radius: 999px;            inset: -24px;	font-size: 0.95rem;

        }

            background: radial-gradient(circle at top right, rgba(112, 177, 255, 0.32), transparent 65%);	color: var(--text-muted);

        .sort-control select {

            border: none;            filter: blur(20px);}

            background: transparent;

            color: var(--text-primary);            z-index: -1;.site-nav__links a {

            padding: 6px 10px;

        }        }	padding: 6px 0;



        .results-grid {	position: relative;

            display: grid;

            gap: 22px;        .hero-media img {}

            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));

        }            border-radius: var(--radius-lg);.site-nav__links a::after {



        .result-card {            border: 1px solid rgba(255, 255, 255, 0.08);	content: '';

            background: var(--surface-card);

            border-radius: var(--radius-md);            box-shadow: var(--shadow-soft);	position: absolute;

            border: 1px solid rgba(255, 255, 255, 0.05);

            padding: 22px;            object-fit: cover;	inset: auto 0 -14px 0;

            display: flex;

            flex-direction: column;        }	height: 2px;

            gap: 14px;

            min-height: 100%;	background: transparent;

            position: relative;

            transition: transform 160ms ease, border 160ms ease;        .metrics-section {	border-radius: 999px;

        }

            max-width: var(--max-width);	transition: var(--transition);

        .result-card:hover {

            transform: translateY(-3px);            margin: 0 auto;}

            border-color: rgba(102, 212, 255, 0.35);

        }            padding: 24px;.site-nav__links a:hover::after,



        .result-meta {        }.site-nav__links a[aria-current="page"]::after {

            display: flex;

            justify-content: space-between;	background: var(--accent);

            gap: 10px;

            flex-wrap: wrap;        .metrics-grid {}

            font-size: 0.85rem;

            color: var(--text-muted);            display: grid;.site-nav__links a[aria-current="page"] {

        }

            gap: 18px;	color: var(--text-primary);

        .badge {

            display: inline-flex;            grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));	font-weight: 600;

            align-items: center;

            gap: 6px;        }}

            padding: 5px 12px;

            border-radius: 999px;.site-nav__actions {

            font-size: 0.78rem;

            text-transform: uppercase;        .metric-card {	display: flex;

            letter-spacing: 0.06em;

            background: rgba(102, 212, 255, 0.14);            background: var(--surface-card);	align-items: center;

            color: var(--accent-strong);

        }            border: 1px solid var(--surface-border);	gap: 14px;



        .result-title {            border-radius: var(--radius-md);}

            font-family: "Space Grotesk", sans-serif;

            font-size: 1.18rem;            padding: 24px;.btn {

            line-height: 1.35;

        }            position: relative;	display: inline-flex;



        .result-title:hover,            overflow: hidden;	align-items: center;

        .result-title:focus {

            color: var(--accent-strong);        }	justify-content: center;

        }

	gap: 10px;

        .result-authors {

            color: var(--text-secondary);        .metric-card::after {	border-radius: 999px;

            font-size: 0.92rem;

        }            content: "";	padding: 12px 22px;



        .result-summary {            position: absolute;	font-weight: 600;

            color: var(--text-secondary);

            font-size: 0.95rem;            inset: 0;	font-size: 0.95rem;

        }

            background: linear-gradient(135deg, rgba(76, 141, 255, 0.12), transparent 55%);	border: 1px solid transparent;

        .card-actions {

            margin-top: auto;            pointer-events: none;	cursor: pointer;

            display: flex;

            flex-wrap: wrap;        }	transition: var(--transition);

            gap: 10px;

        }	position: relative;



        .card-actions a,        .metric-label {	overflow: hidden;

        .card-actions button {

            display: inline-flex;            font-size: 0.85rem;	text-decoration: none;

            align-items: center;

            gap: 6px;            color: var(--text-muted);}

            padding: 10px 14px;

            border-radius: 16px;            text-transform: uppercase;.btn-primary {

            border: 1px solid rgba(255, 255, 255, 0.08);

            background: rgba(9, 15, 30, 0.8);            letter-spacing: 0.08em;	background: linear-gradient(135deg, var(--accent), var(--accent-strong));

            color: var(--text-primary);

            cursor: pointer;        }	color: #fff;

            transition: var(--transition);

        }	box-shadow: var(--shadow-soft);



        .card-actions button {        .metric-value {}

            background: rgba(102, 212, 255, 0.12);

            color: var(--accent-strong);            display: block;.btn-primary:hover {

        }

            font-size: clamp(2.2rem, 3vw, 2.8rem);	transform: translateY(-2px);

        .card-actions a:hover,

        .card-actions button:hover,            font-weight: 700;	box-shadow: var(--shadow-md);

        .card-actions a:focus,

        .card-actions button:focus {            margin: 8px 0 4px;}

            border-color: var(--accent);

            color: var(--accent-strong);        }.btn-ghost {

        }

	background: transparent;

        .load-more {

            align-self: center;        .metric-detail {	color: var(--text-primary);

            padding: 12px 26px;

            border-radius: 999px;            color: var(--text-secondary);	border-color: rgba(255,255,255,0.15);

            border: 1px solid rgba(255, 255, 255, 0.08);

            background: rgba(9, 17, 32, 0.9);            font-size: 0.95rem;}

            color: var(--text-primary);

            cursor: pointer;        }.btn-ghost:hover {

            transition: var(--transition);

        }	border-color: var(--accent);



        .load-more:hover,        .value-props {	color: var(--accent);

        .load-more:focus {

            border-color: var(--accent);            max-width: var(--max-width);}

            color: var(--accent);

        }            margin: 12px auto 64px;.menu-icon {



        .insight-section {            padding: 0 24px;	display: none;

            max-width: var(--max-width);

            margin: 60px auto;        }	flex-direction: column;

            padding: 0 24px;

            display: grid;	gap: 5px;

            gap: 22px;

            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));        .value-grid {	width: 42px;

        }

            display: grid;	height: 42px;

        .insight-card {

            background: rgba(14, 20, 38, 0.82);            gap: 22px;	justify-content: center;

            border: 1px solid rgba(255, 255, 255, 0.06);

            border-radius: var(--radius-md);            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));	align-items: center;

            overflow: hidden;

            display: flex;        }	border-radius: 50%;

            flex-direction: column;

        }	border: 1px solid rgba(255,255,255,0.12);



        .insight-content {        .value-card {	background: rgba(10, 18, 43, 0.4);

            padding: 22px;

        }            background: rgba(18, 28, 52, 0.72);	cursor: pointer;



        .insight-content h3 {            border: 1px solid rgba(255, 255, 255, 0.06);	transition: var(--transition);

            margin: 0 0 10px;

            font-size: 1.1rem;            border-radius: var(--radius-md);}

        }

            padding: 26px;.menu-icon div {

        .insight-content p {

            margin: 0;            backdrop-filter: blur(12px);	width: 20px;

            color: var(--text-secondary);

            font-size: 0.95rem;        }	height: 2px;

        }

	background: var(--text-primary);

        .insight-card iframe {

            border: none;        .value-card h3 {	border-radius: 999px;

            width: 100%;

            min-height: 260px;            margin-top: 0;}

        }

            font-size: 1.15rem;.menu-icon:hover,

        footer {

            padding: 36px 24px 48px;            margin-bottom: 12px;.menu-icon:focus-visible {

            background: #050812;

            border-top: 1px solid rgba(255, 255, 255, 0.05);        }	border-color: var(--accent);

        }

}

        .footer-inner {

            max-width: var(--max-width);        .value-card p {.hero-section {

            margin: 0 auto;

            display: flex;            margin: 0;	position: relative;

            gap: 18px;

            flex-wrap: wrap;            color: var(--text-secondary);	padding: 140px 0 120px;

            align-items: center;

            justify-content: space-between;            font-size: 0.95rem;	overflow: hidden;

            color: var(--text-muted);

            font-size: 0.88rem;        }	color: var(--text-primary);

        }

	background: radial-gradient(circle at 15% -10%, rgba(0,111,253,0.5), transparent 55%), linear-gradient(135deg, #021131 0%, #040814 100%);

        .footer-links {

            display: inline-flex;        .feed-section {}

            gap: 18px;

        }            background: rgba(8, 13, 28, 0.85);.hero-section::before,



        .footer-links a {            border-top: 1px solid rgba(255, 255, 255, 0.05);.hero-section::after {

            color: var(--text-secondary);

        }            border-bottom: 1px solid rgba(255, 255, 255, 0.05);	content: '';



        .modal-backdrop {            margin: 0;	position: absolute;

            display: none;

            position: fixed;        }	border-radius: 50%;

            inset: 0;

            background: rgba(2, 6, 18, 0.82);	filter: blur(0);

            backdrop-filter: blur(6px);

            z-index: 2000;        .feed-shell {	opacity: 0.65;

            align-items: center;

            justify-content: center;            max-width: var(--max-width);}

            padding: 24px;

        }            margin: 0 auto;.hero-section::before {



        .modal-card {            padding: 60px 24px;	top: -160px;

            background: rgba(17, 25, 46, 0.94);

            border-radius: var(--radius-md);            display: grid;	left: -120px;

            border: 1px solid rgba(255, 255, 255, 0.08);

            max-width: 720px;            grid-template-columns: 280px 1fr;	width: 520px;

            width: 100%;

            max-height: 85vh;            gap: 32px;	height: 520px;

            overflow: hidden;

            display: flex;        }	background: radial-gradient(circle, rgba(0,111,253,0.3) 0%, transparent 70%);

            flex-direction: column;

            box-shadow: var(--shadow-soft);}

        }

        .filter-panel {.hero-section::after {

        .modal-header {

            padding: 26px 26px 14px;            background: var(--surface-elevated);	bottom: -220px;

            position: relative;

        }            border: 1px solid var(--surface-border);	right: -140px;



        .modal-title {            border-radius: var(--radius-md);	width: 640px;

            font-size: 1.35rem;

            margin: 0 0 12px;            padding: 26px 22px;	height: 640px;

        }

            display: flex;	background: radial-gradient(circle, rgba(0,180,255,0.18) 0%, transparent 75%);

        .modal-meta {

            font-size: 0.9rem;            flex-direction: column;}

            color: var(--text-muted);

        }            gap: 22px;.hero-inner {



        .modal-body {            position: sticky;	position: relative;

            padding: 0 26px 26px;

            overflow-y: auto;            top: 112px;	max-width: var(--max-width);

        }

            height: fit-content;	margin: 0 auto;

        .modal-close {

            position: absolute;        }	padding: 0 32px;

            top: 18px;

            right: 18px;	display: grid;

            background: rgba(10, 16, 32, 0.8);

            border: 1px solid rgba(255, 255, 255, 0.08);        .filter-panel h2 {	grid-template-columns: minmax(0, 1.05fr) minmax(300px, 0.95fr);

            color: var(--text-secondary);

            width: 40px;            margin: 0 0 6px;	align-items: center;

            height: 40px;

            border-radius: 50%;            font-size: 1.05rem;	gap: 72px;

            cursor: pointer;

        }        }	z-index: 1;



        .modal-close:hover,}

        .modal-close:focus {

            color: var(--accent-strong);        .filter-group {.hero-copy {

            border-color: var(--accent);

        }            display: flex;	display: flex;



        .modal-abstract {            flex-direction: column;	flex-direction: column;

            font-size: 1rem;

            color: var(--text-secondary);            gap: 10px;	gap: 24px;

            white-space: pre-line;

        }        }}



        @media (max-width: 1024px) {.hero-eyebrow {

            .hero {

                grid-template-columns: 1fr;        .filter-label {	display: inline-flex;

                padding-top: 88px;

            }            font-size: 0.85rem;	align-items: center;



            .hero-content {            text-transform: uppercase;	gap: 10px;

                grid-column: auto;

            }            letter-spacing: 0.08em;	padding: 8px 16px;



            .hero-media {            color: var(--text-muted);	background: rgba(0,111,253,0.12);

                grid-column: auto;

                order: -1;        }	border: 1px solid rgba(0,111,253,0.2);

            }

	border-radius: 999px;

            .feed-shell {

                grid-template-columns: 1fr;        .filter-panel input[type="search"],	font-size: 0.85rem;

            }

        .filter-panel select {	letter-spacing: 0.08em;

            .filter-panel {

                position: static;            width: 100%;	text-transform: uppercase;

                order: -1;

            }            padding: 11px 14px;	color: var(--accent);



            .nav-links {            border-radius: 12px;	font-weight: 600;

                position: fixed;

                inset: 72px 20px auto 20px;            border: 1px solid rgba(255, 255, 255, 0.08);}

                background: rgba(7, 12, 28, 0.96);

                border: 1px solid rgba(255, 255, 255, 0.08);            background: rgba(11, 17, 32, 0.9);.hero-title {

                border-radius: var(--radius-md);

                padding: 20px;            color: var(--text-primary);	margin: 0;

                flex-direction: column;

                gap: 16px;        }	font-family: 'Space Grotesk', 'Inter', sans-serif;

                transform: scale(0.96);

                opacity: 0;	font-size: clamp(2.8rem, 4vw, 4.1rem);

                pointer-events: none;

                transition: var(--transition);        .filter-panel input[type="search"]::placeholder {	line-height: 1.05;

            }

            color: rgba(182, 194, 220, 0.6);	letter-spacing: -0.02em;

            .nav-links.open {

                transform: scale(1);        }}

                opacity: 1;

                pointer-events: auto;.hero-description {

            }

        .checkbox-row {	font-size: 1.1rem;

            .nav-toggle {

                display: inline-flex;            display: flex;	color: var(--text-secondary);

            }

            align-items: center;	max-width: 540px;

            .cta-button {

                display: none;            gap: 10px;}

            }

        }            font-size: 0.95rem;.hero-actions {



        @media (max-width: 640px) {            color: var(--text-secondary);	display: flex;

            .nav-shell {

                padding: 16px 18px;        }	flex-wrap: wrap;

            }

	gap: 14px;

            .hero {

                padding: 72px 18px 40px;        .checkbox-row input {}

            }

            width: 18px;.hero-meta {

            .metrics-section,

            .value-props,            height: 18px;	display: flex;

            .feed-shell,

            .insight-section {        }	flex-wrap: wrap;

                padding: 48px 18px;

            }	gap: 18px;



            .results-grid {        .filter-actions {	align-items: center;

                grid-template-columns: 1fr;

            }            display: flex;	color: var(--text-muted);



            .results-header {            gap: 10px;	font-size: 0.95rem;

                flex-direction: column;

            }            flex-wrap: wrap;}

        }

    </style>        }.hero-live {

</head>

<body>	display: inline-flex;

    <div class="page-wrapper">

        <header class="site-header">        .filter-actions button {	align-items: center;

            <div class="nav-shell">

                <a class="brand" href="#top">            flex: 1 1 120px;	gap: 8px;

                    <img src="images/medcityai_logo1.png" alt="MedCityAI logo">

                    <span>MedCityAI</span>            padding: 10px 16px;	padding: 8px 16px;

                </a>

                <button class="nav-toggle" id="mobileToggle" aria-expanded="false" aria-controls="navLinks">            border-radius: 20px;	border-radius: 999px;

                    <i class="fas fa-bars"></i>

                </button>            border: 1px solid rgba(255, 255, 255, 0.08);	background: rgba(0,111,253,0.16);

                <nav class="nav-links" id="navLinks">

                    <a href="#feed">Research Feed</a>            background: transparent;	color: #fff;

                    <a href="analytics.html">Analytics</a>

                    <a href="about.html">About</a>            color: var(--text-primary);	font-weight: 600;

                    <a href="contact.html">Contact</a>

                </nav>            cursor: pointer;}

                <a class="cta-button" href="mailto:info@medcityai.com">Request Access</a>

            </div>            transition: var(--transition);.hero-live span {

        </header>

        }	font-variant-numeric: tabular-nums;

        <main>

            <section class="hero" id="top">}

                <div class="hero-content">

                    <span class="hero-eyebrow"><i class="fas fa-signal"></i> Rochester research pulse</span>        .filter-actions button:hover,.hero-showcase {

                    <h1>Focus your team on breakthroughs, not busywork.</h1>

                    <p>MedCityAI tracks every PubMed update tied to Rochester, Minnesota and surfaces the papers, people, and programs that are shaping tomorrow's care. Spend less time sorting abstracts and more time moving discoveries forward.</p>        .filter-actions button:focus {	position: relative;

                    <div class="hero-actions">

                        <a class="primary" href="#feed"><i class="fas fa-arrow-right"></i> Explore latest findings</a>            border-color: var(--accent);}

                        <a class="secondary" href="analytics.html"><i class="fas fa-chart-line"></i> View analytics dashboard</a>

                    </div>            color: var(--accent);.hero-card {

                </div>

                <div class="hero-media">        }	position: relative;

                    <img src="images/med_city_publications_web.png" alt="Data visualization of MedCityAI publication trends">

                </div>	padding: 34px;

            </section>

        .panel-footnote {	border-radius: var(--radius-lg);

            <section class="metrics-section" aria-label="Key publication metrics">

                <div class="metrics-grid">            font-size: 0.8rem;	background: rgba(10, 20, 48, 0.78);

                    <article class="metric-card">

                        <span class="metric-label">New Today</span>            color: var(--text-muted);	border: 1px solid rgba(255,255,255,0.08);

                        <span class="metric-value" id="VarDay">0</span>

                        <span class="metric-detail">Freshly indexed papers in the last 24 hours</span>            border-top: 1px solid rgba(255, 255, 255, 0.06);	box-shadow: var(--shadow-lg);

                    </article>

                    <article class="metric-card">            padding-top: 12px;	overflow: hidden;

                        <span class="metric-label">This Week</span>

                        <span class="metric-value" id="VarWeek">0</span>            margin-top: 6px;	display: flex;

                        <span class="metric-detail">Seven-day window tracking Rochester output</span>

                    </article>        }	flex-direction: column;

                    <article class="metric-card">

                        <span class="metric-label">This Month</span>	gap: 20px;

                        <span class="metric-value" id="VarMonth">0</span>

                        <span class="metric-detail">Rolling thirty day volume across specialties</span>        .results-panel {}

                    </article>

                    <article class="metric-card">            display: flex;.hero-card::before {

                        <span class="metric-label">Library Size</span>

                        <span class="metric-value" id="VarTot">0</span>            flex-direction: column;	content: '';

                        <span class="metric-detail">Articles in the MedCityAI knowledge graph</span>

                    </article>            gap: 24px;	position: absolute;

                </div>

            </section>        }	inset: 0;



            <section class="value-props" aria-label="Platform highlights">	background: radial-gradient(circle at top right, rgba(0,111,253,0.24), transparent 60%);

                <div class="value-grid">

                    <article class="value-card">        .results-header {	opacity: 0.9;

                        <h3>Intelligence that stays current</h3>

                        <p>Our pipeline refreshes daily so your teams never miss a high-impact Rochester study, clinical trial, or translational milestone.</p>            display: flex;	pointer-events: none;

                    </article>

                    <article class="value-card">            justify-content: space-between;}

                        <h3>Context you can act on</h3>

                        <p>Concise AI-assisted briefings add clarity on why a paper matters, who authored it, and where collaboration could accelerate impact.</p>            gap: 16px;.hero-card h2 {

                    </article>

                    <article class="value-card">            flex-wrap: wrap;	margin: 0;

                        <h3>Built for real workflows</h3>

                        <p>Target the right evidence with precision filters, Rochester affiliated author flags, and direct handoffs to PubMed or analytics views.</p>        }	font-size: 1.3rem;

                    </article>

                </div>	color: var(--text-primary);

            </section>

        .results-header h2 {}

            <section class="feed-section" id="feed">

                <div class="feed-shell">            margin: 0;.hero-card p {

                    <aside class="filter-panel" aria-label="Filters">

                        <h2>Refine results</h2>            font-size: 1.6rem;	margin: 0;

                        <div class="filter-group">

                            <span class="filter-label">Search</span>        }	color: var(--text-secondary);

                            <input type="search" id="searchInput" placeholder="Find diseases, authors, or keywords" autocomplete="off">

                        </div>}

                        <div class="filter-group">

                            <span class="filter-label">Publication Year</span>        .results-summary {.hero-card img {

                            <select id="yearSelect" aria-label="Filter by publication year">

                                <option value="all">All years</option>            color: var(--text-secondary);	border-radius: var(--radius-md);

                            </select>

                        </div>            font-size: 0.95rem;	border: 1px solid rgba(255,255,255,0.08);

                        <div class="filter-group">

                            <span class="filter-label">Options</span>        }	background: rgba(255,255,255,0.02);

                            <label class="checkbox-row">

                                <input type="checkbox" id="rochesterOnly">}

                                <span>Show Rochester affiliated authors only</span>

                            </label>        .sort-control {.hero-card-metrics {

                            <label class="checkbox-row">

                                <input type="checkbox" id="summaryOnly">            display: inline-flex;	display: flex;

                                <span>Has AI generated summary</span>

                            </label>            align-items: center;	flex-direction: column;

                        </div>

                        <div class="filter-actions">            gap: 10px;	gap: 12px;

                            <button id="resetFilters" type="button">Reset filters</button>

                        </div>            background: rgba(18, 28, 48, 0.9);}

                        <p class="panel-footnote" id="refreshNote">Data pipeline refreshes nightly at 02:00 CT.</p>

                    </aside>            border: 1px solid rgba(255, 255, 255, 0.08);.hero-card-metric {



                    <div class="results-panel">            padding: 6px 12px;	display: flex;

                        <div class="results-header">

                            <div>            border-radius: 999px;	align-items: center;

                                <h2>Latest Rochester research</h2>

                                <p class="results-summary" id="resultsSummary">Loading publications...</p>        }	justify-content: space-between;

                            </div>

                            <div class="sort-control">	padding: 12px 16px;

                                <label for="sortOrder">Sort</label>

                                <select id="sortOrder">        .sort-control select {	border-radius: var(--radius-sm);

                                    <option value="newest">Newest first</option>

                                    <option value="oldest">Oldest first</option>            border: none;	background: rgba(255,255,255,0.04);

                                </select>

                            </div>            background: transparent;	color: var(--text-secondary);

                        </div>

                        <div class="results-grid" id="resultsGrid" aria-live="polite"></div>            color: var(--text-primary);	font-size: 0.95rem;

                        <button class="load-more" id="loadMoreBtn" type="button" hidden>Load more results</button>

                    </div>            padding: 6px 10px;}

                </div>

            </section>        }.hero-card-metric strong {



            <section class="insight-section" aria-label="Interactive insights">	font-size: 1.1rem;

                <article class="insight-card">

                    <iframe src="state_map.html" title="Co-author affiliations by state"></iframe>        .results-grid {	color: var(--text-primary);

                    <div class="insight-content">

                        <h3>United States footprint</h3>            display: grid;	font-variant-numeric: tabular-nums;

                        <p>Map Rochester collaborations across the United States to spot emerging institutional partners.</p>

                    </div>            gap: 22px;}

                </article>

                <article class="insight-card">            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));.metrics-band {

                    <iframe src="world_map.html" title="Global co-author affiliations"></iframe>

                    <div class="insight-content">        }	position: relative;

                        <h3>Global reach</h3>

                        <p>Visualize Mayo Clinic global research links and identify regions ready for expansion.</p>	margin-top: -40px;

                    </div>

                </article>        .result-card {	padding: 0 0 80px;

            </section>

        </main>            background: var(--surface-card);}



        <footer>            border-radius: var(--radius-md);.metrics-inner {

            <div class="footer-inner">

                <span>&copy; <span id="currentYear"></span> MedCityAI. Built in Rochester, Minnesota.</span>            border: 1px solid rgba(255, 255, 255, 0.05);	max-width: var(--max-width);

                <div class="footer-links">

                    <a href="privacy_policy.html">Privacy</a>            padding: 22px;	margin: 0 auto;

                    <a href="terms_of_use.html">Terms</a>

                    <a href="cookie_policy.html">Cookies</a>            display: flex;	padding: 0 32px;

                </div>

            </div>            flex-direction: column;}

        </footer>

    </div>            gap: 14px;.metrics-grid {



    <div class="modal-backdrop" id="modalBg" role="dialog" aria-modal="true" aria-hidden="true">            min-height: 100%;	display: grid;

        <div class="modal-card">

            <div class="modal-header">            position: relative;	grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));

                <h3 class="modal-title" id="modalTitle">Abstract</h3>

                <p class="modal-meta" id="modalMeta"></p>            overflow: hidden;	gap: 24px;

                <button class="modal-close" id="modalClose" aria-label="Close abstract">

                    <i class="fas fa-times"></i>            transition: transform 160ms ease, border 160ms ease;}

                </button>

            </div>        }.metric-card {

            <div class="modal-body">

                <div class="modal-abstract" id="modalAbstract"></div>	position: relative;

            </div>

        </div>        .result-card:hover {	padding: 28px;

    </div>

            transform: translateY(-3px);	border-radius: var(--radius-md);

    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js" integrity="sha384-n17Gg4s59sscRwvxAgzbkYV2dv7feRR6L8gDOR4SRzhDvlcOKXTZRm3DwihKNkoo" crossorigin="anonymous"></script>

    <script>            border-color: rgba(102, 212, 255, 0.35);	background: rgba(9, 17, 40, 0.85);

        const modalBg = document.getElementById('modalBg');

        const modalTitle = document.getElementById('modalTitle');        }	border: 1px solid rgba(255,255,255,0.08);

        const modalMeta = document.getElementById('modalMeta');

        const modalAbstract = document.getElementById('modalAbstract');	box-shadow: var(--shadow-soft);

        const modalClose = document.getElementById('modalClose');

        .result-meta {	display: flex;

        function openModal(title, meta, abstractText) {

            modalTitle.textContent = title || 'Abstract';            display: flex;	flex-direction: column;

            modalMeta.textContent = meta || '';

            modalAbstract.textContent = abstractText || 'No abstract available for this publication.';            justify-content: space-between;	gap: 12px;

            modalBg.style.display = 'flex';

            modalBg.setAttribute('aria-hidden', 'false');            gap: 10px;}

        }

            flex-wrap: wrap;.metric-card::after {

        function closeModal() {

            modalBg.style.display = 'none';            font-size: 0.85rem;	content: '';

            modalBg.setAttribute('aria-hidden', 'true');

        }            color: var(--text-muted);	position: absolute;



        modalClose.addEventListener('click', closeModal);        }	inset: 0;

        modalBg.addEventListener('click', (event) => {

            if (event.target === modalBg) {	border-radius: var(--radius-md);

                closeModal();

            }        .badge {	border: 1px solid transparent;

        });

        document.addEventListener('keydown', (event) => {            display: inline-flex;	background: linear-gradient(135deg, rgba(0,111,253,0.2), transparent);

            if (event.key === 'Escape' && modalBg.style.display === 'flex') {

                closeModal();            align-items: center;	opacity: 0;

            }

        });            gap: 6px;	transition: var(--transition);



        async function hydrateCounters() {            padding: 5px 12px;	pointer-events: none;

            const statsPath = './database/summary_stats.txt';

            try {            border-radius: 999px;}

                const response = await fetch(statsPath);

                if (!response.ok) {            font-size: 0.78rem;.metric-card:hover::after {

                    throw new Error('summary_stats.txt not found');

                }            text-transform: uppercase;	opacity: 1;

                const statsText = await response.text();

                statsText.split('\n').forEach((line) => {            letter-spacing: 0.06em;}

                    const parts = line.split('=');

                    if (parts.length !== 2) {            background: rgba(102, 212, 255, 0.14);.metric-label {

                        return;

                    }            color: var(--accent-strong);	font-size: 0.85rem;

                    const key = parts[0].trim();

                    const value = parts[1].trim();        }	letter-spacing: 0.08em;

                    const element = document.getElementById(key);

                    if (element) {	text-transform: uppercase;

                        element.textContent = Number(value).toLocaleString();

                    }        .result-title {	color: var(--text-muted);

                });

            } catch (error) {            font-family: 'Space Grotesk', sans-serif;}

                console.error('Unable to load summary statistics:', error);

            }            font-size: 1.18rem;.metric-value {

        }

            line-height: 1.35;	font-family: 'Space Grotesk', 'Inter', sans-serif;

        const searchInput = document.getElementById('searchInput');

        const yearSelect = document.getElementById('yearSelect');        }	font-size: 2.5rem;

        const rochesterOnly = document.getElementById('rochesterOnly');

        const summaryOnly = document.getElementById('summaryOnly');	color: var(--text-primary);

        const resetFilters = document.getElementById('resetFilters');

        const sortOrder = document.getElementById('sortOrder');        .result-title:hover,	line-height: 1;

        const resultsGrid = document.getElementById('resultsGrid');

        const resultsSummary = document.getElementById('resultsSummary');        .result-title:focus {	font-variant-numeric: tabular-nums;

        const loadMoreBtn = document.getElementById('loadMoreBtn');

        const refreshNote = document.getElementById('refreshNote');            color: var(--accent-strong);}



        const state = {        }.metric-caption {

            publications: [],

            filtered: [],	font-size: 0.95rem;

            visible: 0,

            pageSize: 9,        .result-authors {	color: var(--text-secondary);

            filters: {

                search: '',            color: var(--text-secondary);}

                year: 'all',

                rochester: false,            font-size: 0.92rem;.feed-section {

                summary: false,

                sort: 'newest'        }	position: relative;

            }

        };	padding: 40px 0 120px;



        function parsePublicationDate(entry) {        .result-summary {}

            const rawPubdate = entry.pubdate ? entry.pubdate.trim() : '';

            if (rawPubdate) {            color: var(--text-secondary);.feed-inner {

                const parsedDirect = new Date(rawPubdate);

                if (!Number.isNaN(parsedDirect.getTime())) {            font-size: 0.95rem;	max-width: var(--max-width);

                    return parsedDirect;

                }        }	margin: 0 auto;

            }

            const rawYear = entry.year ? entry.year.trim() : '';	padding: 0 32px;

            const rawMonth = entry.month ? entry.month.trim() : '';

            const rawDay = entry.day ? entry.day.trim() : '';        .card-actions {	display: grid;

            if (rawYear) {

                const monthFallback = rawMonth || 'Jan';            margin-top: auto;	grid-template-columns: 260px minmax(0, 1fr);

                const dayFallback = rawDay || '01';

                const parsedFallback = new Date(`${monthFallback} ${dayFallback}, ${rawYear}`);            display: flex;	gap: 32px;

                if (!Number.isNaN(parsedFallback.getTime())) {

                    return parsedFallback;            flex-wrap: wrap;	align-items: start;

                }

                const numericYear = Number(rawYear);            gap: 10px;}

                if (!Number.isNaN(numericYear)) {

                    return new Date(numericYear, 0, 1);        }.feed-header {

                }

            }	grid-column: 1 / -1;

            return new Date();

        }        .card-actions a,	margin-bottom: 24px;



        const dateFormatter = new Intl.DateTimeFormat('en-US', { month: 'short', day: 'numeric', year: 'numeric' });        .card-actions button {	display: flex;



        function formatDisplayDate(dateObj, fallback) {            display: inline-flex;	flex-direction: column;

            if (!(dateObj instanceof Date) || Number.isNaN(dateObj.getTime())) {

                return fallback || 'Date unavailable';            align-items: center;	gap: 12px;

            }

            return dateFormatter.format(dateObj);            gap: 6px;}

        }

            padding: 10px 14px;.feed-header h2 {

        function buildYearsFilter(publications) {

            const years = new Set();            border-radius: 16px;	margin: 0;

            publications.forEach((pub) => {

                if (pub.year) {            border: 1px solid rgba(255, 255, 255, 0.08);	font-size: 2rem;

                    years.add(pub.year);

                }            background: rgba(9, 15, 30, 0.8);	color: var(--text-primary);

            });

            const sortedYears = Array.from(years).sort((a, b) => Number(b) - Number(a));            color: var(--text-primary);}

            sortedYears.forEach((year) => {

                const option = document.createElement('option');            cursor: pointer;.feed-header p {

                option.value = year;

                option.textContent = year;            transition: var(--transition);	margin: 0;

                yearSelect.appendChild(option);

            });        }	color: var(--text-secondary);

        }

}

        function matchesFilters(publication) {

            const filters = state.filters;        .card-actions button {.filter-bar {

            if (filters.year !== 'all' && publication.year !== filters.year) {

                return false;            background: rgba(102, 212, 255, 0.12);	background: rgba(8, 16, 36, 0.7);

            }

            if (filters.rochester && !publication.hasRochesterAuthor) {            color: var(--accent-strong);	border: 1px solid rgba(255,255,255,0.08);

                return false;

            }        }	border-radius: var(--radius-md);

            if (filters.summary && !publication.hasSummary) {

                return false;	padding: 18px;

            }

            if (filters.search) {        .card-actions a:hover,	box-shadow: var(--shadow-soft);

                const haystack = `${publication.title} ${publication.abstract} ${publication.summary} ${publication.journal} ${publication.authors}`.toLowerCase();

                if (!haystack.includes(filters.search)) {        .card-actions button:hover,}

                    return false;

                }        .card-actions a:focus,.filter-bar-links {

            }

            return true;        .card-actions button:focus {	display: flex;

        }

            border-color: var(--accent);	flex-wrap: wrap;

        function renderResultCard(publication) {

            const card = document.createElement('article');            color: var(--accent-strong);	gap: 10px;

            card.className = 'result-card';

        }}

            const metaRow = document.createElement('div');

            metaRow.className = 'result-meta';.dept-filter-link {

            metaRow.textContent = `${publication.journal || 'Journal pending'} - ${publication.displayDate}`;

            card.appendChild(metaRow);        .load-more {	display: inline-flex;



            if (publication.hasRochesterAuthor) {            align-self: center;	align-items: center;

                const badge = document.createElement('span');

                badge.className = 'badge';            padding: 12px 26px;	padding: 8px 18px;

                badge.innerHTML = '<i class="fas fa-map-marker-alt"></i> Rochester collaborator';

                card.appendChild(badge);            border-radius: 999px;	border-radius: 999px;

            }

            border: 1px solid rgba(255, 255, 255, 0.08);	font-size: 0.92rem;

            const titleLink = document.createElement('a');

            titleLink.className = 'result-title';            background: rgba(9, 17, 32, 0.9);	background: rgba(255,255,255,0.04);

            titleLink.href = publication.url || '#';

            titleLink.target = '_blank';            color: var(--text-primary);	color: var(--text-secondary);

            titleLink.rel = 'noopener noreferrer';

            titleLink.textContent = publication.title || 'Untitled study';            cursor: pointer;	border: 1px solid transparent;

            card.appendChild(titleLink);

            transition: var(--transition);	transition: var(--transition);

            if (publication.authors) {

                const authors = document.createElement('div');        }}

                authors.className = 'result-authors';

                authors.textContent = publication.authors;.dept-filter-link:hover {

                card.appendChild(authors);

            }        .load-more:hover,	color: #fff;



            const summary = document.createElement('p');        .load-more:focus {	border-color: rgba(0,111,253,0.4);

            summary.className = 'result-summary';

            summary.textContent = publication.preview;            border-color: var(--accent);}

            card.appendChild(summary);

            color: var(--accent);.dept-filter-link.active {

            const actionRow = document.createElement('div');

            actionRow.className = 'card-actions';        }	background: linear-gradient(135deg, var(--accent), var(--accent-strong));



            const abstractBtn = document.createElement('button');	color: #fff !important;

            abstractBtn.type = 'button';

            abstractBtn.innerHTML = '<i class="fas fa-align-left"></i> Read abstract';        .insight-section {	border-color: transparent;

            abstractBtn.addEventListener('click', () => {

                const meta = `${publication.journal || 'Journal pending'} - ${publication.displayDate}`;            max-width: var(--max-width);	box-shadow: 0 10px 24px rgba(0,111,253,0.22);

                openModal(publication.title, meta, publication.abstract || 'No abstract available for this publication.');

            });            margin: 60px auto;}

            actionRow.appendChild(abstractBtn);

            padding: 0 24px;.sidebar-filter {

            if (publication.url) {

                const pubmedLink = document.createElement('a');            display: grid;	position: sticky;

                pubmedLink.href = publication.url;

                pubmedLink.target = '_blank';            gap: 22px;	top: 120px;

                pubmedLink.rel = 'noopener noreferrer';

                pubmedLink.innerHTML = '<i class="fas fa-external-link-alt"></i> View on PubMed';            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));	display: flex;

                actionRow.appendChild(pubmedLink);

            }        }	flex-direction: column;



            card.appendChild(actionRow);	gap: 14px;

            resultsGrid.appendChild(card);

        }        .insight-card {	padding: 24px;



        function renderResults(reset) {            background: rgba(14, 20, 38, 0.82);	background: rgba(8, 16, 36, 0.68);

            if (reset) {

                resultsGrid.innerHTML = '';            border: 1px solid rgba(255, 255, 255, 0.06);	border-radius: var(--radius-md);

                state.visible = 0;

            }            border-radius: var(--radius-md);	border: 1px solid rgba(255,255,255,0.07);

            const nextBatch = state.filtered.slice(state.visible, state.visible + state.pageSize);

            nextBatch.forEach(renderResultCard);            overflow: hidden;	box-shadow: var(--shadow-soft);

            state.visible += nextBatch.length;

            const showing = state.filtered.length === 0 ? '0' : String(state.visible);            display: flex;}

            resultsSummary.textContent = `Showing ${showing} of ${state.filtered.length} results`;

            loadMoreBtn.hidden = state.visible >= state.filtered.length;            flex-direction: column;.sidebar-filter .sidebar-header h3 {

        }

        }	margin: 0;

        function applyFilters() {

            state.filtered = state.publications.filter(matchesFilters);	color: var(--text-primary);

            const multiplier = state.filters.sort === 'newest' ? -1 : 1;

            state.filtered.sort((a, b) => {        .insight-content {	font-size: 1rem;

                if (a.sortDate < b.sortDate) {

                    return -1 * multiplier;            padding: 22px;	text-transform: uppercase;

                }

                if (a.sortDate > b.sortDate) {        }	letter-spacing: 0.08em;

                    return 1 * multiplier;

                }}

                return 0;

            });        .insight-content h3 {.sidebar-content {

            renderResults(true);

        }            margin: 0 0 10px;	display: flex;



        function resetAllFilters() {            font-size: 1.1rem;	flex-direction: column;

            searchInput.value = '';

            yearSelect.value = 'all';        }	gap: 10px;

            rochesterOnly.checked = false;

            summaryOnly.checked = false;}

            sortOrder.value = 'newest';

            state.filters = { search: '', year: 'all', rochester: false, summary: false, sort: 'newest' };        .insight-content p {.filter-checkbox {

            applyFilters();

        }            margin: 0;	display: flex;



        function hydrateRefreshNote() {            color: var(--text-secondary);	align-items: center;

            const now = new Date();

            const formatted = now.toLocaleString('en-US', { month: 'short', day: 'numeric', year: 'numeric', hour: '2-digit', minute: '2-digit' });            font-size: 0.95rem;	gap: 10px;

            refreshNote.textContent = `Data pipeline refreshes nightly at 02:00 CT - Last synced ${formatted} CT`;

        }        }	padding: 8px 10px;



        function renderResultCardBatch(reset) {	border-radius: var(--radius-sm);

            renderResults(reset);

        }        .insight-card iframe {	cursor: pointer;



        async function loadPublications() {            border: none;	color: var(--text-secondary);

            try {

                const response = await fetch('pubmed_data.csv');            width: 100%;	transition: var(--transition);

                if (!response.ok) {

                    throw new Error('pubmed_data.csv not found');            min-height: 260px;}

                }

                const csvText = await response.text();        }.filter-checkbox:hover {

                Papa.parse(csvText, {

                    header: true,	background: rgba(255,255,255,0.05);

                    skipEmptyLines: true,

                    complete: (results) => {        footer {}

                        const publications = results.data.map((row) => {

                            const dateObj = parsePublicationDate(row);            padding: 36px 24px 48px;.filter-checkbox input[type="checkbox"] {

                            const previewSource = row.llm_summary ? row.llm_summary.trim() : (row.abstract ? row.abstract.trim() : '');

                            const preview = previewSource.length > 360 ? `${previewSource.slice(0, 357)}...` : (previewSource || 'Summary pending.');            background: #050812;	width: 18px;

                            return {

                                pmid: row.pmid ? row.pmid.trim() : '',            border-top: 1px solid rgba(255, 255, 255, 0.05);	height: 18px;

                                title: row.title ? row.title.trim() : 'Untitled study',

                                abstract: row.abstract ? row.abstract.trim() : '',        }	accent-color: var(--accent);

                                summary: row.llm_summary ? row.llm_summary.trim() : '',

                                preview,	cursor: pointer;

                                journal: row.journal ? row.journal.trim() : 'Journal pending',

                                pubdate: row.pubdate ? row.pubdate.trim() : '',        .footer-inner {}

                                year: row.year ? row.year.trim() : '',

                                month: row.month ? row.month.trim() : '',            max-width: var(--max-width);#clearFilters {

                                day: row.day ? row.day.trim() : '',

                                authors: row.authors_display ? row.authors_display.trim() : (row.authors ? row.authors.replaceAll('|', ', ') : ''),            margin: 0 auto;	margin-top: 12px;

                                hasRochesterAuthor: Boolean(row.rochester_authors && row.rochester_authors.trim().length > 0),

                                hasSummary: Boolean(row.llm_summary && row.llm_summary.trim().length > 0),            display: flex;	padding: 10px 14px;

                                url: row.url ? row.url.trim() : (row.pmid ? `https://pubmed.ncbi.nlm.nih.gov/${row.pmid.trim()}/` : ''),

                                displayDate: formatDisplayDate(dateObj, row.pubdate ? row.pubdate.trim() : ''),            gap: 18px;	border: none;

                                sortDate: dateObj.getTime() || 0,

                                dateObj            flex-wrap: wrap;	border-radius: 999px;

                            };

                        });            align-items: center;	background: rgba(231, 76, 60, 0.12);

                        state.publications = publications;

                        buildYearsFilter(publications);            justify-content: space-between;	color: #ff8a7a;

                        applyFilters();

                    },            color: var(--text-muted);	font-weight: 600;

                    error: (error) => {

                        console.error('Error parsing CSV:', error);            font-size: 0.88rem;	cursor: pointer;

                        resultsSummary.textContent = 'There was a problem loading the publication feed.';

                    }        }	transition: var(--transition);

                });

            } catch (error) {}

                console.error('Unable to load publications:', error);

                resultsSummary.textContent = 'There was a problem loading the publication feed.';        .footer-links {#clearFilters:hover {

            }

        }            display: inline-flex;	background: rgba(231, 76, 60, 0.22);



        let searchDebounce;            gap: 18px;}

        searchInput.addEventListener('input', (event) => {

            clearTimeout(searchDebounce);        }.results-area {

            searchDebounce = setTimeout(() => {

                state.filters.search = event.target.value.trim().toLowerCase();	display: flex;

                applyFilters();

            }, 180);        .footer-links a {	flex-direction: column;

        });

            color: var(--text-secondary);	gap: 28px;

        yearSelect.addEventListener('change', (event) => {

            state.filters.year = event.target.value;        }}

            applyFilters();

        });.results-grid {



        rochesterOnly.addEventListener('change', (event) => {        .modal-backdrop {	display: grid;

            state.filters.rochester = event.target.checked;

            applyFilters();            display: none;	grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));

        });

            position: fixed;	gap: 28px;

        summaryOnly.addEventListener('change', (event) => {

            state.filters.summary = event.target.checked;            inset: 0;}

            applyFilters();

        });            background: rgba(2, 6, 18, 0.82);.result-item {



        sortOrder.addEventListener('change', (event) => {            backdrop-filter: blur(6px);	background: rgba(9, 18, 40, 0.85);

            state.filters.sort = event.target.value;

            applyFilters();            z-index: 2000;	border-radius: var(--radius-md);

        });

            align-items: center;	border: 1px solid rgba(255,255,255,0.09);

        loadMoreBtn.addEventListener('click', () => {

            renderResultCardBatch(false);            justify-content: center;	box-shadow: var(--shadow-soft);

        });

            padding: 24px;	padding: 0;

        resetFilters.addEventListener('click', resetAllFilters);

        }	position: relative;

        const mobileToggle = document.getElementById('mobileToggle');

        const navLinks = document.getElementById('navLinks');	transition: var(--transition);

        mobileToggle.addEventListener('click', () => {

            const isOpen = navLinks.classList.toggle('open');        .modal-card {}

            mobileToggle.setAttribute('aria-expanded', String(isOpen));

            mobileToggle.innerHTML = isOpen ? '<i class="fas fa-times"></i>' : '<i class="fas fa-bars"></i>';            background: rgba(17, 25, 46, 0.94);.result-item:hover {

        });

            border-radius: var(--radius-md);	transform: translateY(-4px);

        document.getElementById('currentYear').textContent = new Date().getFullYear();

            border: 1px solid rgba(255, 255, 255, 0.08);	border-color: rgba(0,111,253,0.35);

        hydrateCounters();

        hydrateRefreshNote();            max-width: 720px;}

        loadPublications();

    </script>            width: 100%;.card-flip-container {

</body>

</html>            max-height: 85vh;	position: relative;


            overflow: hidden;	width: 100%;

            display: flex;	min-height: 100%;

            flex-direction: column;	transition: transform 0.55s;

            box-shadow: var(--shadow-soft);	transform-style: preserve-3d;

        }}

.card-flip-container.flipped {

        .modal-header {	transform: rotateY(180deg);

            padding: 26px 26px 14px;}

            position: relative;.card-face {

        }	width: 100%;

	backface-visibility: hidden;

        .modal-title {	border-radius: var(--radius-md);

            font-size: 1.35rem;	padding: 26px;

            margin: 0 0 12px;	box-sizing: border-box;

        }}

.card-front {

        .modal-meta {	position: relative;

            font-size: 0.9rem;	z-index: 2;

            color: var(--text-muted);	display: flex;

        }	flex-direction: column;

	gap: 18px;

        .modal-body {}

            padding: 0 26px 26px;.card-back {

            overflow-y: auto;	position: absolute;

        }	inset: 0;

	transform: rotateY(180deg);

        .modal-close {	background: rgba(4, 25, 60, 0.9);

            position: absolute;	border-radius: var(--radius-md);

            top: 18px;	border: 1px solid rgba(0,111,253,0.25);

            right: 18px;	display: flex;

            background: rgba(10, 16, 32, 0.8);	flex-direction: column;

            border: 1px solid rgba(255, 255, 255, 0.08);	padding: 26px;

            color: var(--text-secondary);	overflow: hidden;

            width: 40px;}

            height: 40px;.card-back-header {

            border-radius: 50%;	display: flex;

            cursor: pointer;	justify-content: space-between;

        }	align-items: center;

	padding-bottom: 14px;

        .modal-close:hover,	border-bottom: 1px solid rgba(255,255,255,0.08);

        .modal-close:focus {	color: var(--text-primary);

            color: var(--accent-strong);}

            border-color: var(--accent);.card-back-content {

        }	flex: 1;

	overflow-y: auto;

        .modal-abstract {	padding-right: 6px;

            font-size: 1rem;	color: var(--text-secondary);

            color: var(--text-secondary);}

            white-space: pre-line;.card-back-summary {

        }	line-height: 1.7;

	font-size: 0.96rem;

        @media (max-width: 1024px) {	color: var(--text-secondary);

            .hero {}

                grid-template-columns: 1fr;.card-back-disclaimer {

                padding-top: 88px;	margin-top: 18px;

            }	padding-top: 14px;

	border-top: 1px solid rgba(255,255,255,0.08);

            .hero-content {	font-size: 0.85rem;

                grid-column: auto;	color: var(--text-muted);

            }}

.flip-instruction {

            .hero-media {	font-size: 0.8rem;

                grid-column: auto;	text-transform: uppercase;

                order: -1;	letter-spacing: 0.1em;

            }	color: var(--text-muted);

}

            .feed-shell {.new-tab {

                grid-template-columns: 1fr;	position: absolute;

            }	top: 20px;

	left: 22px;

            .filter-panel {	background: rgba(231, 76, 60, 0.85);

                position: static;	color: #fff;

                order: -1;	font-size: 0.68rem;

            }	font-weight: 700;

	padding: 6px 12px;

            .nav-links {	border-radius: 999px;

                position: fixed;	letter-spacing: 0.08em;

                inset: 72px 20px auto 20px;}

                background: rgba(7, 12, 28, 0.96);.department-badge {

                border: 1px solid rgba(255, 255, 255, 0.08);	position: absolute;

                border-radius: var(--radius-md);	top: 22px;

                padding: 20px;	right: 22px;

                flex-direction: column;	font-size: 0.75rem;

                gap: 16px;	font-weight: 600;

                transform: scale(0.96);	color: var(--accent);

                opacity: 0;	background: rgba(0,111,253,0.12);

                pointer-events: none;	padding: 6px 12px;

                transition: var(--transition);	border-radius: 999px;

            }}

.result-title {

            .nav-links.open {	font-size: 1.15rem;

                transform: scale(1);	font-weight: 600;

                opacity: 1;	color: var(--text-primary);

                pointer-events: auto;}

            }.result-title:hover {

	color: var(--accent);

            .nav-toggle {}

                display: inline-flex;.result-authors {

            }	font-size: 0.95rem;

	color: var(--text-secondary);

            .cta-button {}

                display: none;.result-authors .roch-author {

            }	color: var(--accent);

        }	border-bottom: 1px dotted rgba(0,111,253,0.4);

}

        @media (max-width: 640px) {.result-authors .roch-author:hover {

            .nav-shell {	color: #7bc5ff;

                padding: 16px 18px;}

            }.result-citation {

	font-size: 0.85rem;

            .hero {	color: var(--text-muted);

                padding: 72px 18px 40px;}

            }.share-buttons {

	display: flex;

            .metrics-section, .value-props, .feed-shell, .insight-section {	gap: 16px;

                padding: 48px 18px;	margin-top: 12px;

            }}

.share-buttons a {

            .results-grid {	width: 36px;

                grid-template-columns: 1fr;	height: 36px;

            }	background: rgba(255,255,255,0.04);

	border-radius: 50%;

            .results-header {	display: inline-flex;

                flex-direction: column;	align-items: center;

            }	justify-content: center;

        }	color: var(--text-secondary);

    </style>	font-size: 1rem;

</head>}

<body>.share-buttons a:hover {

    <div class="page-wrapper">	color: #fff;

        <header class="site-header">	background: rgba(0,111,253,0.3);

            <div class="nav-shell">}

                <a class="brand" href="#top">.pagination-controls {

                    <img src="images/medcityai_logo1.png" alt="MedCityAI logo">	display: none;

                    <span>MedCityAI</span>	justify-content: center;

                </a>	align-items: center;

                <button class="nav-toggle" id="mobileToggle" aria-expanded="false" aria-controls="navLinks">	gap: 18px;

                    <i class="fas fa-bars"></i>}

                </button>.pagination-status {

                <nav class="nav-links" id="navLinks">	font-weight: 600;

                    <a href="#feed">Research Feed</a>	color: var(--text-secondary);

                    <a href="analytics.html">Analytics</a>}

                    <a href="about.html">About</a>#prevPage,

                    <a href="contact.html">Contact</a>#nextPage {

                </nav>	border: none;

                <a class="cta-button" href="mailto:info@medcityai.com">Request Access</a>	border-radius: 999px;

            </div>	padding: 12px 22px;

        </header>	font-weight: 600;

	font-size: 0.95rem;

        <main>	cursor: pointer;

            <section class="hero" id="top">	transition: var(--transition);

                <div class="hero-content">}

                    <span class="hero-eyebrow"><i class="fas fa-signal"></i> Rochester research pulse</span>#prevPage {

                    <h1>Focus your team on breakthroughs, not busywork.</h1>	background: rgba(255,255,255,0.05);

                    <p>MedCityAI tracks every PubMed update tied to Rochester, Minnesota and surfaces the papers, people, and programs shaping tomorrows care. Spend less time sorting abstracts and more time moving discoveries forward.</p>	color: var(--text-secondary);

                    <div class="hero-actions">}

                        <a class="primary" href="#feed"><i class="fas fa-arrow-right"></i> Explore latest findings</a>#prevPage:hover {

                        <a class="secondary" href="analytics.html"><i class="fas fa-chart-line"></i> View analytics dashboard</a>	background: rgba(255,255,255,0.12);

                    </div>}

                </div>#nextPage {

                <div class="hero-media">	background: linear-gradient(135deg, var(--accent), var(--accent-strong));

                    <img src="images/med_city_publications_web.png" alt="Data visualization of MedCityAI publication trends">	color: #fff;

                </div>}

            </section>#nextPage:hover {

	transform: translateY(-2px);

            <section class="metrics-section" aria-label="Key publication metrics">}

                <div class="metrics-grid">.modal-bg {

                    <article class="metric-card">	display: none;

                        <span class="metric-label">New Today</span>	position: fixed;

                        <span class="metric-value" id="VarDay">0</span>	inset: 0;

                        <span class="metric-detail">Freshly indexed papers in the last 24 hours</span>	background: rgba(2, 7, 20, 0.75);

                    </article>	backdrop-filter: blur(10px);

                    <article class="metric-card">	z-index: 4000;

                        <span class="metric-label">This Week</span>	justify-content: center;

                        <span class="metric-value" id="VarWeek">0</span>	align-items: center;

                        <span class="metric-detail">Seven-day window tracking Rochester output</span>	padding: 24px;

                    </article>}

                    <article class="metric-card">.modal-content {

                        <span class="metric-label">This Month</span>	background: var(--surface);

                        <span class="metric-value" id="VarMonth">0</span>	border-radius: var(--radius-lg);

                        <span class="metric-detail">Rolling 30-day volume across specialties</span>	padding: 34px;

                    </article>	max-width: 680px;

                    <article class="metric-card">	width: min(90vw, 680px);

                        <span class="metric-label">Library Size</span>	max-height: 80vh;

                        <span class="metric-value" id="VarTot">0</span>	overflow-y: auto;

                        <span class="metric-detail">Articles in the MedCityAI knowledge graph</span>	border: 1px solid rgba(255,255,255,0.08);

                    </article>	box-shadow: var(--shadow-lg);

                </div>	color: var(--text-secondary);

            </section>}

.modal-close {

            <section class="value-props" aria-label="Platform highlights">	position: absolute;

                <div class="value-grid">	top: 18px;

                    <article class="value-card">	right: 24px;

                        <h3>Intelligence that stays current</h3>	background: transparent;

                        <p>Our pipeline refreshes daily so your teams never miss a high-impact Rochester study, clinical trial, or translational milestone.</p>	border: none;

                    </article>	font-size: 1.8rem;

                    <article class="value-card">	color: var(--text-muted);

                        <h3>Context you can act on</h3>	cursor: pointer;

                        <p>Concise AI-assisted briefings give fast clarity on why a paper matters, who authored it, and where collaboration could accelerate impact.</p>}

                    </article>.modal-close:hover {

                    <article class="value-card">	color: var(--accent);

                        <h3>Built for real workflows</h3>}

                        <p>Target the right evidence with precision filters, Rochester-affiliated author flags, and direct handoffs to PubMed or analytics views.</p>.modal-abstract h4 {

                    </article>	color: var(--accent);

                </div>}

            </section>.author-modal {

	display: none;

            <section class="feed-section" id="feed">	position: fixed;

                <div class="feed-shell">	inset: 0;

                    <aside class="filter-panel" aria-label="Filters">	background: rgba(2, 7, 20, 0.82);

                        <h2>Refine results</h2>	backdrop-filter: blur(10px);

                        <div class="filter-group">	z-index: 5000;

                            <span class="filter-label">Search</span>	justify-content: center;

                            <input type="search" id="searchInput" placeholder="Find diseases, authors, or keywords" autocomplete="off">	align-items: center;

                        </div>	padding: 24px;

                        <div class="filter-group">}

                            <span class="filter-label">Publication Year</span>.author-modal-content {

                            <select id="yearSelect" aria-label="Filter by publication year">	background: var(--surface);

                                <option value="all">All years</option>	border-radius: var(--radius-lg);

                            </select>	max-width: 880px;

                        </div>	width: min(92vw, 880px);

                        <div class="filter-group">	max-height: 82vh;

                            <span class="filter-label">Options</span>	display: flex;

                            <label class="checkbox-row">	flex-direction: column;

                                <input type="checkbox" id="rochesterOnly">	border: 1px solid rgba(255,255,255,0.08);

                                <span>Show Rochester-affiliated authors only</span>	box-shadow: var(--shadow-lg);

                            </label>}

                            <label class="checkbox-row">.author-modal-header {

                                <input type="checkbox" id="summaryOnly">	display: flex;

                                <span>Has AI-generated summary</span>	justify-content: space-between;

                            </label>	align-items: center;

                        </div>	padding: 26px 32px;

                        <div class="filter-actions">	border-bottom: 1px solid rgba(255,255,255,0.08);

                            <button id="resetFilters" type="button">Reset filters</button>}

                        </div>.author-modal-header h3 {

                        <p class="panel-footnote" id="refreshNote">Data pipeline refreshes nightly at 02:00 CT.</p>	margin: 0;

                    </aside>	color: var(--text-primary);

	font-size: 1.4rem;

                    <div class="results-panel">}

                        <div class="results-header">.author-modal-close {

                            <div>	background: transparent;

                                <h2>Latest Rochester research</h2>	border: none;

                                <p class="results-summary" id="resultsSummary">Loading publications</p>	font-size: 1.6rem;

                            </div>	color: var(--text-muted);

                            <div class="sort-control">	cursor: pointer;

                                <label for="sortOrder">Sort</label>}

                                <select id="sortOrder">.author-modal-close:hover {

                                    <option value="newest">Newest first</option>	color: var(--accent);

                                    <option value="oldest">Oldest first</option>}

                                </select>.author-modal-loading {

                            </div>	padding: 32px;

                        </div>	color: var(--text-secondary);

                        <div class="results-grid" id="resultsGrid" aria-live="polite"></div>}

                        <button class="load-more" id="loadMoreBtn" type="button" hidden>Load more results</button>.author-bibliography {

                    </div>	margin: 0;

                </div>	padding: 28px 32px;

            </section>	list-style: none;

	overflow-y: auto;

            <section class="insight-section" aria-label="Interactive insights">	color: var(--text-secondary);

                <article class="insight-card">}

                    <iframe src="state_map.html" title="Co-author affiliations by state"></iframe>.author-bibliography li {

                    <div class="insight-content">	padding: 18px 0;

                        <h3>United States footprint</h3>	border-bottom: 1px solid rgba(255,255,255,0.06);

                        <p>Map Rochester collaborations across the United States to spot emerging institutional partners.</p>	font-size: 0.95rem;

                    </div>}

                </article>.author-bibliography li:last-child {

                <article class="insight-card">	border-bottom: none;

                    <iframe src="world_map.html" title="Global co-author affiliations"></iframe>}

                    <div class="insight-content">.spinner {

                        <h3>Global reach</h3>	border: 3px solid rgba(255,255,255,0.08);

                        <p>Visualize Mayo Clinics worldwide research links and identify regions ready for expansion.</p>	border-top: 3px solid var(--accent);

                    </div>	border-radius: 50%;

                </article>	width: 42px;

            </section>	height: 42px;

        </main>	animation: spin 1s linear infinite;

	margin: 0 auto 16px;

        <footer>}

            <div class="footer-inner">@keyframes spin {

                <span>&copy; <span id="currentYear"></span> MedCityAI. Built in Rochester, Minnesota.</span>	to {

                <div class="footer-links">		transform: rotate(360deg);

                    <a href="privacy_policy.html">Privacy</a>	}

                    <a href="terms_of_use.html">Terms</a>}

                    <a href="cookie_policy.html">Cookies</a>#footer {

                </div>	padding: 60px 32px 40px;

            </div>	background: rgba(2, 7, 20, 0.95);

        </footer>	border-top: 1px solid rgba(255,255,255,0.06);

    </div>	color: var(--text-muted);

}

    <div class="modal-backdrop" id="modalBg" role="dialog" aria-modal="true" aria-hidden="true">#footer .inner {

        <div class="modal-card">	max-width: var(--max-width);

            <div class="modal-header">	margin: 0 auto;

                <h3 class="modal-title" id="modalTitle">Abstract</h3>	display: flex;

                <p class="modal-meta" id="modalMeta"></p>	flex-direction: column;

                <button class="modal-close" id="modalClose" aria-label="Close abstract">	gap: 24px;

                    <i class="fas fa-times"></i>	align-items: center;

                </button>	text-align: center;

            </div>}

            <div class="modal-body">#footer .icons {

                <div class="modal-abstract" id="modalAbstract"></div>	display: flex;

            </div>	gap: 18px;

        </div>	padding: 0;

    </div>	margin: 0;

	list-style: none;

    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js" integrity="sha384-n17Gg4s59sscRwvxAgzbkYV2dv7feRR6L8gDOR4SRzhDvlcOKXTZRm3DwihKNkoo" crossorigin="anonymous"></script>}

    <script>#footer .icons a {

        const modalBg = document.getElementById('modalBg');	width: 42px;

        const modalTitle = document.getElementById('modalTitle');	height: 42px;

        const modalMeta = document.getElementById('modalMeta');	border-radius: 50%;

        const modalAbstract = document.getElementById('modalAbstract');	border: 1px solid rgba(255,255,255,0.08);

        const modalClose = document.getElementById('modalClose');	display: inline-flex;

	align-items: center;

        function openModal(title, meta, abstractText) {	justify-content: center;

            modalTitle.textContent = title || 'Abstract';	color: var(--text-secondary);

            modalMeta.textContent = meta || '';}

            modalAbstract.textContent = abstractText || 'No abstract available for this publication.';#footer .icons a:hover {

            modalBg.style.display = 'flex';	border-color: var(--accent);

            modalBg.setAttribute('aria-hidden', 'false');	color: #fff;

        }}

#footer .copyright {

        function closeModal() {	margin: 0;

            modalBg.style.display = 'none';	padding: 0;

            modalBg.setAttribute('aria-hidden', 'true');	list-style: none;

        }	font-size: 0.85rem;

	display: flex;

        modalClose.addEventListener('click', closeModal);	gap: 12px;

        modalBg.addEventListener('click', (event) => {	flex-wrap: wrap;

            if (event.target === modalBg) {	justify-content: center;

                closeModal();}

            }@media (max-width: 1100px) {

        });	.hero-inner {

        document.addEventListener('keydown', (event) => {		grid-template-columns: 1fr;

            if (event.key === 'Escape' && modalBg.style.display === 'flex') {		gap: 48px;

                closeModal();		text-align: center;

            }	}

        });	.hero-description {

		margin: 0 auto;

        async function hydrateCounters() {	}

            const statsPath = './database/summary_stats.txt';	.hero-actions {

            try {		justify-content: center;

                const response = await fetch(statsPath);	}

                if (!response.ok) {	.hero-meta {

                    throw new Error('summary_stats.txt not found');		justify-content: center;

                }	}

                const statsText = await response.text();	.hero-showcase {

                statsText.split('\n').forEach((line) => {		max-width: 520px;

                    const [rawKey, rawValue] = line.split('=');		margin: 0 auto;

                    if (!rawKey || !rawValue) return;	}

                    const key = rawKey.trim();	.feed-inner {

                    const value = rawValue.trim();		grid-template-columns: 1fr;

                    const element = document.getElementById(key);	}

                    if (element) {	.sidebar-filter {

                        element.textContent = Number(value).toLocaleString();		position: static;

                    }		flex-direction: row;

                });		flex-wrap: wrap;

            } catch (error) {		gap: 12px;

                console.error('Unable to load summary statistics:', error);	}

            }}

        }@media (max-width: 900px) {

	.site-nav__links {

        const searchInput = document.getElementById('searchInput');		display: none;

        const yearSelect = document.getElementById('yearSelect');	}

        const rochesterOnly = document.getElementById('rochesterOnly');	.menu-icon {

        const summaryOnly = document.getElementById('summaryOnly');		display: flex;

        const resetFilters = document.getElementById('resetFilters');	}

        const sortOrder = document.getElementById('sortOrder');}

        const resultsGrid = document.getElementById('resultsGrid');@media (max-width: 768px) {

        const resultsSummary = document.getElementById('resultsSummary');	.site-nav__inner {

        const loadMoreBtn = document.getElementById('loadMoreBtn');		padding: 18px 20px;

        const refreshNote = document.getElementById('refreshNote');	}

	.hero-section {

        const state = {		padding: 120px 0 80px;

            publications: [],	}

            filtered: [],	.metrics-inner {

            visible: 0,		padding: 0 20px;

            pageSize: 9,	}

            filters: {	.feed-inner {

                search: '',		padding: 0 20px;

                year: 'all',	}

                rochester: false,	.results-grid {

                summary: false,		grid-template-columns: 1fr;

                sort: 'newest'	}

            }	.filter-bar {

        };		padding: 16px;

	}

        function parsePublicationDate(entry) {}

            const rawPubdate = entry.pubdate?.trim();@media (max-width: 480px) {

            if (rawPubdate) {	.hero-title {

                const parsed = new Date(rawPubdate);		font-size: 2.4rem;

                if (!Number.isNaN(parsed.getTime())) {	}

                    return parsed;	.hero-card {

                }		padding: 24px;

            }	}

            const rawYear = entry.year?.trim();	.metric-card {

            const rawMonth = entry.month?.trim();		padding: 24px;

            const rawDay = entry.day?.trim();	}

            if (rawYear) {}

                const monthFallback = rawMonth || 'Jan';*:focus-visible {

                const dayFallback = rawDay || '01';	outline: 2px solid var(--accent);

                const parsed = new Date(`${monthFallback} ${dayFallback}, ${rawYear}`);	outline-offset: 3px;

                if (!Number.isNaN(parsed.getTime())) {	border-radius: 6px;

                    return parsed;}

                }.sr-only {

                const numericYear = Number(rawYear);	position: absolute;

                if (!Number.isNaN(numericYear)) {	width: 1px;

                    return new Date(numericYear, 0, 1);	height: 1px;

                }	padding: 0;

            }	margin: -1px;

            return new Date();	overflow: hidden;

        }	clip: rect(0, 0, 0, 0);

	white-space: nowrap;

        const dateFormatter = new Intl.DateTimeFormat('en-US', { month: 'short', day: 'numeric', year: 'numeric' });	border: 0;

}

        function formatDisplayDate(dateObj, fallback) {		</style>

            if (!(dateObj instanceof Date) || Number.isNaN(dateObj.getTime())) {		margin-bottom: 12px;

                return fallback || 'Date unavailable';		padding-bottom: 12px;

            }		border-bottom: 2px solid #2196f3;

            return dateFormatter.format(dateObj);		flex-shrink: 0;

        }		cursor: pointer;

	}

        function buildYearsFilter(publications) {		

            const years = new Set();	.card-back-content {

            publications.forEach((pub) => {		flex: 1;

                if (pub.year) {		display: flex;

                    years.add(pub.year);		flex-direction: column;

                }		overflow-y: auto;

            });		overflow-x: hidden;

            const sortedYears = Array.from(years).sort((a, b) => Number(b) - Number(a));		padding-right: 5px;

            sortedYears.forEach((year) => {		position: relative;

                const option = document.createElement('option');		-webkit-overflow-scrolling: touch;

                option.value = year;		touch-action: pan-y;

                option.textContent = year;		cursor: default;

                yearSelect.appendChild(option);	}

            });	

        }	.card-back-content::after {

		content: '';

        function matchesFilters(publication) {		position: sticky;

            const { search, year, rochester, summary } = state.filters;		bottom: 0;

            if (year !== 'all' && publication.year !== year) {		left: 0;

                return false;		right: 0;

            }		height: 30px;

            if (rochester && !publication.hasRochesterAuthor) {		background: linear-gradient(to bottom, transparent, rgba(227, 242, 253, 0.9));

                return false;		pointer-events: none;

            }		z-index: 1;

            if (summary && !publication.hasSummary) {	}

                return false;	

            }	.card-back-content::-webkit-scrollbar {

            if (search) {		width: 6px;

                const haystack = `${publication.title} ${publication.abstract} ${publication.summary} ${publication.journal} ${publication.authors}`.toLowerCase();	}

                if (!haystack.includes(search)) {	

                    return false;	.card-back-content::-webkit-scrollbar-track {

                }		background: rgba(33, 150, 243, 0.1);

            }		border-radius: 3px;

            return true;	}

        }	

	.card-back-content::-webkit-scrollbar-thumb {

        function renderResultCard(publication) {		background: #2196f3;

            const card = document.createElement('article');		border-radius: 3px;

            card.className = 'result-card';	}

	

            const metaRow = document.createElement('div');	.card-back-content::-webkit-scrollbar-thumb:hover {

            metaRow.className = 'result-meta';		background: #1976d2;

            metaRow.textContent = `${publication.journal || 'Journal pending'}  ${publication.displayDate}`;	}

            card.appendChild(metaRow);	

	.card-back-summary {

            if (publication.hasRochesterAuthor) {		flex: 1;

                const badge = document.createElement('span');		line-height: 1.7;

                badge.className = 'badge';		color: #1a237e;

                badge.innerHTML = '<i class="fas fa-map-marker-alt"></i> Rochester collaborator';		font-size: 15px;

                card.appendChild(badge);		margin-bottom: 12px;

            }		touch-action: pan-y;

	}		.card-back-disclaimer {

            const titleLink = document.createElement('a');			padding-top: 12px;

            titleLink.className = 'result-title';			border-top: 1px solid #bbdefb;

            titleLink.href = publication.url || '#';			margin-top: auto;

            titleLink.target = '_blank';			flex-shrink: 0;

            titleLink.rel = 'noopener noreferrer';		}

            titleLink.textContent = publication.title || 'Untitled study';		

            card.appendChild(titleLink);	.flip-instruction {

		text-align: center;

            if (publication.authors) {		font-size: 12px;

                const authors = document.createElement('div');		color: #999;

                authors.className = 'result-authors';		margin-top: 8px;

                authors.textContent = publication.authors;		font-style: italic;

                card.appendChild(authors);		flex-shrink: 0;

            }		cursor: pointer;

	}		.new-tab {

            const summary = document.createElement('p');			position: absolute;

            summary.className = 'result-summary';			top: 0;

            summary.textContent = publication.preview;			left: 0;

            card.appendChild(summary);			background: #e74c3c;

			color: #fff;

            const actionRow = document.createElement('div');			font-size: 12px;

            actionRow.className = 'card-actions';			font-weight: bold;

			padding: 4px 12px;

            const abstractBtn = document.createElement('button');			border-radius: 8px 0 8px 0;

            abstractBtn.type = 'button';			z-index: 10;

            abstractBtn.innerHTML = '<i class="fas fa-align-left"></i> Read abstract';			pointer-events: none; /* Prevent blocking clicks */

            abstractBtn.addEventListener('click', () => {		}

                const meta = `${publication.journal || 'Journal pending'}  ${publication.displayDate}`;		

                openModal(publication.title, meta, publication.abstract || 'No abstract available for this publication.');		.department-badge {

            });			position: absolute;

            actionRow.appendChild(abstractBtn);			top: 8px;

			right: 8px;

            if (publication.url) {			background: transparent;

                const pubmedLink = document.createElement('a');			color: #2c3e50;

                pubmedLink.href = publication.url;			font-size: 11px;

                pubmedLink.target = '_blank';			font-weight: 500;

                pubmedLink.rel = 'noopener noreferrer';			font-style: italic;

                pubmedLink.innerHTML = '<i class="fas fa-external-link-alt"></i> View on PubMed';			padding: 4px 10px;

                actionRow.appendChild(pubmedLink);			border-radius: 4px;

            }			z-index: 10;

			max-width: 200px;

            card.appendChild(actionRow);			text-align: right;

            resultsGrid.appendChild(card);			line-height: 1.3;

        }			pointer-events: none; /* Prevent blocking clicks */

		}

        function renderResults(reset = false) {		

            if (reset) {		/* Department filter links */

                resultsGrid.innerHTML = '';		.dept-filter-link {

                state.visible = 0;			display: inline-block;

            }			cursor: pointer;

            const remaining = state.filtered.length - state.visible;		}

            const nextBatch = state.filtered.slice(state.visible, state.visible + state.pageSize);		.dept-filter-link:hover {

            nextBatch.forEach(renderResultCard);			color: #fff !important;

            state.visible += nextBatch.length;			background: rgba(255, 255, 255, 0.1);

            const showing = state.filtered.length === 0 ? '0' : `${state.visible}`;			border-radius: 4px;

            resultsSummary.textContent = `Showing ${showing} of ${state.filtered.length} results`;		}

            loadMoreBtn.hidden = state.visible >= state.filtered.length;		.dept-filter-link.active {

        }			color: #fff !important;

			background: rgba(255, 255, 255, 0.2);

        function applyFilters() {			border-radius: 4px;

            state.filtered = state.publications.filter(matchesFilters);			font-weight: 600;

            const sortMultiplier = state.filters.sort === 'newest' ? -1 : 1;		}

            state.filtered.sort((a, b) => {		

                if (a.sortDate < b.sortDate) return -1 * sortMultiplier;		/* Filter bar below header */

                if (a.sortDate > b.sortDate) return 1 * sortMultiplier;		.filter-bar {

                return 0;			background: #f5f5f5;

            });			border-bottom: 2px solid #e0e0e0;

            renderResults(true);			padding: 20px 0 20px 0;

        }			box-shadow: 0 2px 8px rgba(0,0,0,0.1);

		}

        function resetAllFilters() {		

            searchInput.value = '';		.filter-bar-content {

            yearSelect.value = 'all';			max-width: 1200px;

            rochesterOnly.checked = false;			margin: 0 auto;

            summaryOnly.checked = false;			padding: 0 20px;

            sortOrder.value = 'newest';		}

            state.filters = { search: '', year: 'all', rochester: false, summary: false, sort: 'newest' };		

            applyFilters();		.filter-bar-content #pubmed-results {

        }			background: #f5f5f5;

			padding: 20px 0;

        function hydrateRefreshNote() {			margin-top: 0;

            const now = new Date();			border-radius: 0;

            const formatted = now.toLocaleString('en-US', { month: 'short', day: 'numeric', year: 'numeric', hour: '2-digit', minute: '2-digit' });			box-shadow: none;

            refreshNote.textContent = `Data pipeline refreshes nightly at 02:00 CT  Last synced ${formatted} CT`;		}

        }		

		/* Add side padding only on mobile */

        async function loadPublications() {		@media (max-width: 768px) {

            try {			.filter-bar-content #pubmed-results {

                const response = await fetch('pubmed_data.csv');				padding: 20px 20px;

                if (!response.ok) {			}

                    throw new Error('pubmed_data.csv not found');		}

                }		

                const csvText = await response.text();		.filter-bar-title {

                Papa.parse(csvText, {			color: #2c3e50;

                    header: true,			font-size: 14px;

                    skipEmptyLines: true,			font-weight: 600;

                    complete: (results) => {			margin-bottom: 12px;

                        const publications = results.data.map((row) => {		}

                            const dateObj = parsePublicationDate(row);		

                            const previewSource = row.llm_summary?.trim() || row.abstract?.trim() || '';		.filter-bar-links {

                            const preview = previewSource.length > 360 ? `${previewSource.slice(0, 357)}...` : (previewSource || 'Summary pending.');			display: flex;

                            return {			flex-wrap: wrap;

                                pmid: row.pmid?.trim() || '',			gap: 8px;

                                title: row.title?.trim() || 'Untitled study',			align-items: center;

                                abstract: row.abstract?.trim() || '',		}

                                summary: row.llm_summary?.trim() || '',		

                                preview,		.filter-bar .dept-filter-link {

                                journal: row.journal?.trim() || 'Journal pending',			color: #555;

                                pubdate: row.pubdate?.trim() || '',			text-decoration: none;

                                year: row.year?.trim() || '',			font-size: 14px;

                                month: row.month?.trim() || '',			padding: 6px 12px;

                                day: row.day?.trim() || '',			transition: all 0.2s;

                                authors: row.authors_display?.trim() || row.authors?.replaceAll('|', ', ') || '',			border-radius: 4px;

                                hasRochesterAuthor: Boolean(row.rochester_authors && row.rochester_authors.trim().length > 0),		}

                                hasSummary: Boolean(row.llm_summary && row.llm_summary.trim().length > 0),		

                                url: row.url?.trim() || (row.pmid ? `https://pubmed.ncbi.nlm.nih.gov/${row.pmid}/` : ''),		.filter-bar .dept-filter-link:hover {

                                displayDate: formatDisplayDate(dateObj, row.pubdate?.trim()),			background: #f5f5f5;

                                sortDate: dateObj.getTime() || 0,			color: #2c3e50;

                                dateObj		}

                            };		

                        });		.filter-bar .dept-filter-link.active {

                        state.publications = publications;			color: #fff !important;

                        buildYearsFilter(publications);			background: #3498db;

                        applyFilters();		}

                    },		

                    error: (error) => {		.filter-bar-links span {

                        console.error('Error parsing CSV:', error);			color: #ccc;

                        resultsSummary.textContent = 'There was a problem loading the publication feed.';		}

                    }		

                });		/* Sidebar Filter */

            } catch (error) {		.sidebar-filter {

                console.error('Unable to load publications:', error);			width: 160px;

                resultsSummary.textContent = 'There was a problem loading the publication feed.';			background: white;

            }			border: 1px solid #ddd;

        }			border-radius: 8px;

			padding: 16px 12px;

        let searchDebounce;			box-shadow: 0 2px 8px rgba(0,0,0,0.1);

        searchInput.addEventListener('input', (event) => {		}

            clearTimeout(searchDebounce);		

            searchDebounce = setTimeout(() => {		.sidebar-filter .sidebar-header h3 {

                state.filters.search = event.target.value.trim().toLowerCase();			font-size: 14px !important;

                applyFilters();			margin: 0 0 10px 0 !important;

            }, 180);		}

        });		

		.sidebar-content {

        yearSelect.addEventListener('change', (event) => {			display: flex;

            state.filters.year = event.target.value;			flex-direction: column;

            applyFilters();			gap: 6px;

        });		}

		

        rochesterOnly.addEventListener('change', (event) => {		.filter-checkbox {

            state.filters.rochester = event.target.checked;			display: flex;

            applyFilters();			align-items: center;

        });			gap: 8px;

			cursor: pointer;

        summaryOnly.addEventListener('change', (event) => {			padding: 4px 6px;

            state.filters.summary = event.target.checked;			border-radius: 4px;

            applyFilters();			transition: background 0.2s;

        });			font-size: 13px;

		}

        sortOrder.addEventListener('change', (event) => {		

            state.filters.sort = event.target.value;		.filter-checkbox:hover {

            applyFilters();			background: #f5f5f5;

        });		}

		

        loadMoreBtn.addEventListener('click', () => {		.filter-checkbox input[type="checkbox"] {

            renderResults(false);			cursor: pointer;

        });			width: 18px;

			height: 18px;

        resetFilters.addEventListener('click', resetAllFilters);		}

		

        const mobileToggle = document.getElementById('mobileToggle');		.filter-checkbox span {

        const navLinks = document.getElementById('navLinks');			font-size: 14px;

        mobileToggle.addEventListener('click', () => {			color: #2c3e50;

            const isOpen = navLinks.classList.toggle('open');			user-select: none;

            mobileToggle.setAttribute('aria-expanded', String(isOpen));		}

            mobileToggle.innerHTML = isOpen ? '<i class="fas fa-times"></i>' : '<i class="fas fa-bars"></i>';		

        });		/* Main content layout with sidebar */

		#main-content {

        document.getElementById('currentYear').textContent = new Date().getFullYear();			width: 100%;

			padding: 0;

        hydrateCounters();		}

        hydrateRefreshNote();		

        loadPublications();		.content-with-sidebar {

    </script>			max-width: 1200px;

</body>			margin: 0 auto;

</html>			padding: 40px 20px;

		}
		
		#one {
			max-width: 1200px;
			margin: 0 auto;
			padding: 0 20px;
		}
		
		/* Hide sidebar on smaller screens */
		@media (max-width: 1023px) {
			.sidebar-filter {
				display: none;
			}
		}
		
		.result-title {
			display: block;
			font-size: 18px;
			font-weight: 600;
			color: #0056a3;
			text-decoration: none;
			margin-bottom: 8px;
		}
		.result-title:hover { 
			text-decoration: underline; 
		}
		.result-authors { 
			color: #333; 
			font-size: 14px; 
			margin-bottom: 6px; 
		}
		
		/* Clickable Rochester authors */
		.result-authors .roch-author {
			color: #555;
			font-weight: normal;
			text-decoration: none;
			border-bottom: 1px dotted #3498db;
			cursor: pointer;
			transition: all 0.2s ease;
		}
		.result-authors .roch-author:hover {
			color: #2980b9;
			border-bottom-color: #2980b9;
		}
		
		.result-citation { 
			color: #666; 
			font-size: 13px; 
			margin-bottom: 10px; 
		}

		/* Share buttons */
		.share-buttons { 
			margin-top: 10px; 
		}
		.share-buttons a {
			display: inline-block;
			margin-right: 10px;
			font-size: 20px;
			color: #5e5e5e;
			padding: 6px 10px;
			border-radius: 6px;
			text-decoration: none;
			transition: opacity 0.3s ease;
		}
		.share-buttons a:hover { 
			opacity: 0.85; 
		}

		/* Top Navigation Bar */
		.top-bar {
			background: #ffffff;
			color: #2c3e50;
			padding: 15px 0;
			font-size: 14px;
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			z-index: 1001;
			box-shadow: 0 2px 10px rgba(0,0,0,0.1);
			border-bottom: 1px solid #eee;
		}
		.top-bar-content {
			max-width: 1200px;
			margin: 0 auto;
			display: flex;
			justify-content: space-between;
			align-items: center;
			padding: 0 20px;
		}
		.logo {
			display: flex;
			align-items: center;
		}
		.logo img {
			height: 40px;
			width: auto;
		}
		.nav-links {
			display: flex;
			gap: 30px;
			align-items: center;
		}
		.nav-links a {
			color: #2c3e50;
			text-decoration: none;
			font-weight: 500;
			font-size: 15px;
			transition: color 0.3s ease;
		}
		.nav-links a:hover {
			color: #3498db;
		}
		.cta-button {
			background: linear-gradient(135deg, #3498db, #2980b9);
			color: white;
			padding: 10px 20px;
			border-radius: 25px;
			text-decoration: none;
			font-weight: 600;
			font-size: 14px;
			transition: all 0.3s ease;
		}
		.cta-button:hover {
			transform: translateY(-1px);
			box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);
		}
		.menu-icon {
			display: none;
			flex-direction: column;
			cursor: pointer;
		}
		.menu-icon div {
			width: 25px;
			height: 3px;
			background: #2c3e50;
			margin: 3px 0;
			transition: 0.3s;
		}

		/* Hero section */
		   .hero-section {
			   background: linear-gradient(120deg, #006FFD 0%, #0056a3 100%);
			   min-height: 340px;
			   display: flex;
			   align-items: center;
			   position: relative;
			   overflow: hidden;
			   margin-top: 70px;
			   z-index: 1;
		   }
		   .hero-bg-blobs {
			   position: absolute;
			   top: 0;
			   left: 0;
			   width: 100%;
			   height: 100%;
			   z-index: 0;
			   pointer-events: none;
			   opacity: 1;
			   transition: opacity 0.5s;
		   }

		/* Extend the backdrop into the results grid section */
		#one.wrapper.style1.special {
			background: linear-gradient(135deg, #e3eaf3 0%, #b6c7e0 100%);
			z-index: 0;
		}
		.hero-section::before {
			content: '';
			position: absolute;
			top: 0;
			right: 0;
			width: 50%;
			height: 100%;
			background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 600" fill="rgba(52,152,219,0.05)"><circle cx="300" cy="150" r="100"/><circle cx="350" cy="400" r="80"/><path d="M200,100 Q300,200 400,300" stroke="rgba(52,152,219,0.1)" stroke-width="3" fill="none"/></svg>') center/cover;
			z-index: 1;
		}
		.hero-content {
			max-width: 1200px;
			margin: 0 auto;
			   padding: 36px 20px;
			display: grid;
			grid-template-columns: 1fr 350px;
			gap: 60px;
			align-items: center;
			position: relative;
			z-index: 2;
		}
		.hero-right {
			position: relative;
		}
		.chart-container {
			position: relative;
			aspect-ratio: 1;
			display: flex;
			align-items: center;
			justify-content: center;
		}

		.hero-left h1 {
			font-size: 3em;
			font-weight: 800;
			color: #2c3e50;
			margin-bottom: 24px;
			line-height: 1.1;
		}
		.hero-left .subtitle {
			font-size: 1.2em;
			color: #7f8c8d;
			margin-bottom: 16px;
			font-weight: 500;
		}
		.hero-left p {
			font-size: 1.1em;
			color: #34495e;
			margin-bottom: 36px;
			line-height: 1.7;
		}
		.button-row {
			display: flex;
			gap: 16px;
			flex-wrap: wrap;
		}
		.btn {
			padding: 14px 28px;
			border-radius: 50px;
			font-weight: 600;
			text-decoration: none;
			transition: all 0.3s ease;
			border: none;
			cursor: pointer;
			font-size: 15px;
		}
		.btn-primary {
			background: linear-gradient(135deg, #3498db, #2980b9);
			color: white;
			box-shadow: 0 4px 16px rgba(52, 152, 219, 0.3);
		}
		.btn-primary:hover {
			transform: translateY(-2px);
			box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
		}
		.btn-secondary {
			background: rgba(255, 255, 255, 0.1);
			color: white;
			border: 2px solid rgba(255, 255, 255, 0.3);
		}
		.btn-secondary:hover {
			background: rgba(255, 255, 255, 0.2);
			border-color: rgba(255, 255, 255, 0.5);
		}

		/* Stats card */
		.stats-card {
			background: #ffffff;
			border-radius: 15px;
			padding: 30px 24px;
			box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
			border: 1px solid #e8f4f8;
			position: relative;
		}
		.stats-card::before {
			content: '';
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			height: 4px;
			background: linear-gradient(90deg, #3498db, #2980b9, #3498db);
			border-radius: 20px 20px 0 0;
			animation: shimmer 3s ease-in-out infinite;
		}
		@keyframes shimmer {
			0%, 100% { opacity: 0.6; }
			50% { opacity: 1; }
		}
		.daily-count {
			display: flex;
			align-items: center;
			margin-bottom: 20px;
			padding-bottom: 16px;
			border-bottom: 1px solid #eee;
		}
		.daily-count h3 {
			margin: 0;
			font-size: 1.1em;
			color: #2c3e50;
			font-weight: 600;
		}
		.count-number {
			font-size: 2.4em;
			font-weight: 800;
			color: #3498db;
			margin-left: 12px;
		}
		.ai-summary h4 {
			margin: 0 0 12px 0;
			color: #2c3e50;
			font-size: 1.1em;
			font-weight: 600;
			display: flex;
			align-items: center;
		}
		.ai-summary h4::before {
			content: '';
			margin-right: 8px;
		}
		.summary-text {
			color: #34495e;
			line-height: 1.6;
			font-size: 14px;
		}
		.update-time {
			margin-top: 16px;
			padding-top: 12px;
			border-top: 1px solid #eee;
			font-size: 12px;
			color: #7f8c8d;
			text-align: center;
		}

		/* Responsive design */
		@media (max-width: 900px) {
			.results { column-count: 2; }
			.hero-content {
				grid-template-columns: 1fr;
				gap: 40px;
				text-align: center;
			}
			.chart-container {
				display: none;
			}
			.hero-left h1 { font-size: 2.4em; }
			.hero-left p { font-size: 1.1em; }
			.nav-links {
				display: none;
			}
			.menu-icon {
				display: flex;
			}
		}
		@media (max-width: 600px) {
			.results { column-count: 1; }
			.hero-content {
				padding: 40px 15px;
			}
			.hero-left h1 { font-size: 2em; }
			.hero-left p { font-size: 1em; }
			.button-row {
				justify-content: center;
			}
			.btn {
				padding: 12px 24px;
				font-size: 14px;
			}
			
			/* Hide scrollbar on mobile for cleaner look */
			.card-back-content::-webkit-scrollbar {
				display: none;
			}
			.card-back-content {
				-ms-overflow-style: none;
				scrollbar-width: none;
			}
			.chart-container {
				display: none;
			}

			.stats-card {
				padding: 24px 18px;
			}
			.count-number { font-size: 2em; }
		}
		
		/* Author Bibliography Modal */
		.author-modal {
			display: none;
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: rgba(0, 0, 0, 0.6);
			z-index: 4000;
			justify-content: center;
			align-items: center;
		}
		.author-modal-content {
			background: white;
			border-radius: 12px;
			max-width: 800px;
			width: 90%;
			max-height: 80vh;
			overflow: hidden;
			display: flex;
			flex-direction: column;
			box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
		}
		.author-modal-header {
			display: flex;
			justify-content: space-between;
			align-items: center;
			padding: 24px;
			border-bottom: 2px solid #e0e0e0;
			background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
		}
		.author-modal-header h3 {
			margin: 0;
			color: #2c3e50;
			font-size: 1.6em;
		}
		.author-modal-close {
			background: none;
			border: none;
			font-size: 28px;
			color: #95a5a6;
			cursor: pointer;
			transition: color 0.2s ease;
			padding: 0;
			width: 32px;
			height: 32px;
			display: flex;
			align-items: center;
			justify-content: center;
		}
		.author-modal-close:hover {
			color: #2c3e50;
		}
		.author-modal-loading {
			text-align: center;
			padding: 40px;
			color: #7f8c8d;
		}
		.author-bibliography {
			list-style: none;
			padding: 24px;
			margin: 0;
			overflow-y: auto;
			flex: 1;
		}
		.author-bibliography li {
			padding: 16px 0;
			border-bottom: 1px solid #e0e0e0;
			font-size: 14px;
			line-height: 1.7;
			color: #2c3e50;
		}
		.author-bibliography li:last-child {
			border-bottom: none;
		}
		.author-bibliography .pub-journal {
			font-style: italic;
			color: #555;
		}
		.author-bibliography .pub-year {
			font-weight: 600;
			color: #2c3e50;
		}
		
		/* Loading spinner */
		.spinner {
			border: 3px solid #f3f3f3;
			border-top: 3px solid #3498db;
			border-radius: 50%;
			width: 40px;
			height: 40px;
			animation: spin 1s linear infinite;
			margin: 0 auto 20px;
		}
		@keyframes spin {
			0% { transform: rotate(0deg); }
			100% { transform: rotate(360deg); }
		}
		
		/* ===== ACCESSIBILITY IMPROVEMENTS ===== */
		
		/* Skip to main content link */
		.skip-link {
			position: absolute;
			top: -50px;
			left: 10px;
			background: #3498db;
			color: white;
			padding: 10px 20px;
			text-decoration: none;
			z-index: 10001;
			font-weight: 600;
			border-radius: 0 0 8px 8px;
			transition: top 0.3s;
		}
		.skip-link:focus {
			top: 0;
		}
		
		/* Enhanced focus styles for keyboard navigation */
		*:focus {
			outline: 3px solid #3498db;
			outline-offset: 2px;
		}
		
		a:focus {
			outline: 3px solid #3498db;
			outline-offset: 3px;
		}
		
		button:focus {
			outline: 3px solid #3498db;
			outline-offset: 3px;
		}
		
		.nav-links a:focus {
			text-decoration: underline;
		}
		
		.menu-icon {
			cursor: pointer;
			background: none;
			border: none;
			padding: 8px;
		}
		
		.menu-icon:hover,
		.menu-icon:focus {
			background: rgba(52, 152, 219, 0.1);
			border-radius: 4px;
		}
		
		/* Modal accessibility */
		.modal-bg[aria-hidden="true"] {
			display: none;
		}
		
		.modal-content {
			position: relative;
		}
		
		.modal-close {
			cursor: pointer;
			background: none;
			border: none;
			font-size: 28px;
			line-height: 1;
		}
		
		.modal-close:hover {
			color: #3498db;
		}
		
		.modal-close:focus {
			outline: 3px solid #3498db;
			outline-offset: 2px;
			border-radius: 4px;
		}
		
		/* Ensure sufficient color contrast */
		.result-authors {
			color: #2c3e50; /* Improved from #333 */
		}
		
		.result-citation {
			color: #555; /* Improved from #666 */
		}
		
		/* Screen reader only text */
		.sr-only {
			position: absolute;
			width: 1px;
			height: 1px;
			padding: 0;
			margin: -1px;
			overflow: hidden;
			clip: rect(0, 0, 0, 0);
			white-space: nowrap;
			border-width: 0;
		}
		</style>
	</head>
	<body class="landing is-preload">
		<!-- Skip to main content link for keyboard users -->
		<a href="#main-content" class="skip-link">Skip to main content</a>
		
		<!-- Page Wrapper -->
		<div id="page-wrapper">
			<!-- Modern Medical Navigation Header -->
			<nav class="top-bar" role="navigation" aria-label="Main navigation">
				<div class="top-bar-content">
					<div class="logo">
						<img src="images/medcityai_logo1.png" alt="Med City AI Logo" style="height:48px; width:auto;" />
					</div>
					<div class="nav-links" role="menubar">
						<a href="index.html" role="menuitem" aria-current="page">New Today</a>
						<a href="search.html" role="menuitem">Search</a>
						<a href="analytics.html" role="menuitem">Analytics</a>
						<a href="about.html" role="menuitem">About</a>
						<a href="contact.html" role="menuitem">Contact</a>
					</div>
					<div style="display: flex; align-items: center; gap: 15px;">
						<a href="#subscribe" class="cta-button">Subscribe</a>
						<button class="menu-icon" aria-label="Toggle mobile menu" aria-expanded="false" aria-controls="mobile-menu">
							<span class="sr-only">Menu</span>
							<div aria-hidden="true"></div>
							<div aria-hidden="true"></div>
							<div aria-hidden="true"></div>
						</button>
					</div>
				</div>
			</nav>

			<!-- Hero Section -->
			<section class="hero-section" aria-label="Hero banner" style="position:relative; overflow:hidden;">
				<!-- Animated SVG background blobs -->
				   <svg class="hero-bg-blobs" width="100%" height="900" viewBox="0 0 1440 900" style="position:absolute;top:0;left:0;width:100%;height:100%;z-index:0;pointer-events:none;" aria-hidden="true" role="presentation">
					   <defs>
						   <linearGradient id="blobGradient1" x1="0" y1="0" x2="1" y2="1">
							   <stop offset="0%" stop-color="#3498db" stop-opacity="0.18"/>
							   <stop offset="100%" stop-color="#b6c7e0" stop-opacity="0.12"/>
						   </linearGradient>
						   <linearGradient id="blobGradient2" x1="0" y1="1" x2="1" y2="0">
							   <stop offset="0%" stop-color="#e3eaf3" stop-opacity="0.16"/>
							   <stop offset="100%" stop-color="#2980b9" stop-opacity="0.10"/>
						   </linearGradient>
					   </defs>
					   <g>
						   <circle id="blob1" cx="330" cy="220" r="330" fill="url(#blobGradient1)">
							   <animate attributeName="cx" values="330;1110;330" dur="15s" repeatCount="indefinite"/>
							   <animate attributeName="cy" values="220;680;220" dur="13.125s" repeatCount="indefinite"/>
						   </circle>
						   <circle id="blob2" cx="270" cy="180" r="270" fill="url(#blobGradient2)">
							   <animate attributeName="cx" values="270;1170;270" dur="16.875s" repeatCount="indefinite"/>
							   <animate attributeName="cy" values="180;720;180" dur="11.25s" repeatCount="indefinite"/>
						   </circle>
						   <circle id="blob3" cx="450" cy="450" r="450" fill="url(#blobGradient1)" opacity="0.7">
							   <animate attributeName="cx" values="450;990;450" dur="18.75s" repeatCount="indefinite"/>
							   <animate attributeName="cy" values="450;850;450" dur="15s" repeatCount="indefinite"/>
						   </circle>
					   </g>
				   </svg>
				<div class="hero-content">
					<div class="hero-left">
						<div class="subtitle" style="color:#e0e0e0;">Rochester, Minnesota</div>
						<h1 style="color:#fff; text-shadow: 0 4px 18px rgba(0,0,0,0.28);">What's New in Med City?</h1>
						<p style="color:#e0e0e0;">MedCityAI is a real-time feed of biomedical research from Rochester, MN. All information freely sourced from the National Library of Medicine (PubMed).</p>
					</div>
					<div class="hero-right">
						<div class="chart-container">
							<img src="images/med_city_publications_web.png" alt="Chart showing growth of Rochester, Minnesota biomedical publications over time" style="width: 100%; height: 100%; object-fit: contain;">
						</div>
					</div>
				</div>
			</section>

			<!-- Filter Bar -->
			<div class="filter-bar">
				<div class="filter-bar-content">
					<div class="filter-bar-title">Filter by Specialty:</div>
					<div class="filter-bar-links">
						<a href="#" class="dept-filter-link active" data-dept="">Everything</a>
						<span></span>
						<a href="#" class="dept-filter-link" data-dept="Surgery">Surgery</a>
						<span></span>
						<a href="#" class="dept-filter-link" data-dept="Cardiology">Cardiology</a>
						<span></span>
						<a href="#" class="dept-filter-link" data-dept="Neurology">Neurology</a>
						<span></span>
						<a href="#" class="dept-filter-link" data-dept="Oncology">Oncology</a>
						<span></span>
						<a href="#" class="dept-filter-link" data-dept="Radiation Oncology">Radiation Oncology</a>
						<span></span>
						<a href="#" class="dept-filter-link" data-dept="Radiology">Radiology</a>
						<span></span>
						<a href="#" class="dept-filter-link" data-dept="Pediatrics">Pediatrics</a>
						<span></span>
						<a href="#" class="dept-filter-link" data-dept="Internal Medicine">Internal Medicine</a>
						<span></span>
					<a href="#" class="dept-filter-link" data-dept="Psychiatry">Psychiatry</a>
					<span></span>
					<a href="#" class="dept-filter-link" data-dept="AI/ML/DL & Generative AI">AI/ML/DL & Generative AI</a>
				</div>					<!-- Results Grid -->
					<div id="pubmed-results" role="region" aria-live="polite" aria-atomic="false" aria-label="Publication results"></div>
					
					<!-- Pagination Controls -->
					<nav id="pagination-controls" style="display:none; text-align:center; margin: 30px 0; padding: 20px;" role="navigation" aria-label="Pagination">
						<button id="prevPage" aria-label="Go to previous page" style="padding:12px 24px; margin:0 10px; border-radius:25px; border:1px solid #3498db; background:white; color:#3498db; cursor:pointer; font-weight:600;"> Previous</button>
						<span id="pageInfo" role="status" aria-live="polite" style="margin:0 20px; font-size:16px; color:#2c3e50; font-weight:500;">Page 1</span>
						<button id="nextPage" aria-label="Go to next page" style="padding:12px 24px; margin:0 10px; border-radius:25px; border:1px solid #3498db; background:white; color:#3498db; cursor:pointer; font-weight:600;">Next </button>
					</nav>
				</div>
			</div>

			<!-- Main Content Section (Hidden) -->
			<main id="main-content" role="main" style="display: none;">
				<div class="content-with-sidebar">
					<!-- Fixed Sidebar Filter -->
					<aside id="sidebarFilter" class="sidebar-filter" role="complementary" aria-label="Department filters" style="display: none;">
						<div class="sidebar-header">
							<h3 style="margin: 0 0 16px 0; font-size: 16px; font-weight: 700; color: #2c3e50;">Filter by Department</h3>
						</div>
					<div class="sidebar-content">
						<label class="filter-checkbox">
							<input type="checkbox" value="Surgery" class="dept-checkbox">
							<span>Surgery</span>
						</label>
						<label class="filter-checkbox">
							<input type="checkbox" value="Cardiology" class="dept-checkbox">
							<span>Cardiology</span>
						</label>
						<label class="filter-checkbox">
							<input type="checkbox" value="Neurology" class="dept-checkbox">
							<span>Neurology</span>
						</label>
						<label class="filter-checkbox">
							<input type="checkbox" value="Oncology" class="dept-checkbox">
							<span>Oncology</span>
						</label>
						<label class="filter-checkbox">
							<input type="checkbox" value="Radiology" class="dept-checkbox">
							<span>Radiology</span>
						</label>
						<label class="filter-checkbox">
							<input type="checkbox" value="Pediatrics" class="dept-checkbox">
							<span>Pediatrics</span>
						</label>
						<label class="filter-checkbox">
							<input type="checkbox" value="Internal Medicine" class="dept-checkbox">
							<span>Internal Medicine</span>
						</label>
						<label class="filter-checkbox">
							<input type="checkbox" value="Psychiatry" class="dept-checkbox">
							<span>Psychiatry</span>
						</label>
						<label class="filter-checkbox">
						</label>
						<button id="clearFilters" style="width: 100%; margin-top: 12px; padding: 6px; background: #e74c3c; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 12px; font-weight: 600;">Clear All</button>
					</div>
				</aside>
				
				<section id="one" class="wrapper style1 special" style="padding: 40px 0;">
					<!-- Results Grid -->
					<div id="pubmed-results" role="region" aria-live="polite" aria-atomic="false" aria-label="Publication results" style="margin-top:40px;"></div>
					
					<!-- Pagination Controls -->
					<nav id="pagination-controls" style="display:none; text-align:center; margin: 30px 0; padding: 20px;" role="navigation" aria-label="Pagination">
						<button id="prevPage" aria-label="Go to previous page" style="padding:12px 24px; margin:0 10px; border-radius:25px; border:1px solid #3498db; background:white; color:#3498db; cursor:pointer; font-weight:600;"> Previous</button>
						<span id="pageInfo" role="status" aria-live="polite" style="margin:0 20px; font-size:16px; color:#2c3e50; font-weight:500;">Page 1</span>
						<button id="nextPage" aria-label="Go to next page" style="padding:12px 24px; margin:0 10px; border-radius:25px; border:1px solid #3498db; background:white; color:#3498db; cursor:pointer; font-weight:600;">Next </button>
					</nav>

					<!-- Modal for abstracts -->
					<div id="modalBg" class="modal-bg" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-hidden="true">
						<div class="modal-content" role="document">
							<button class="modal-close" id="modalClose" aria-label="Close modal">&times;</button>
							<h3 id="modalTitle"></h3>
							<div class="modal-abstract" id="modalAbstract"></div>
						</div>
					</div>
					
					<!-- Author Bibliography Modal -->
					<div id="authorModal" class="author-modal author-modal-bg" role="dialog" aria-modal="true" aria-labelledby="authorModalTitle" aria-hidden="true">
						<div class="author-modal-content" role="document">
							<div class="author-modal-header">
								<h3 id="authorModalTitle">Author Publications</h3>
								<button class="author-modal-close" onclick="closeAuthorModal()" aria-label="Close author publications modal">&times;</button>
							</div>
							<div id="authorModalLoading" class="author-modal-loading" style="display: none;" role="status" aria-live="polite">
								<div class="spinner" aria-hidden="true"></div>
								<p>Loading publications...</p>
							</div>
							<ol id="authorBibliography" class="author-bibliography" aria-label="List of author publications"></ol>
						</div>
					</div>
				</section>
			</div>
		</main>

		<!-- Footer -->
			<footer id="footer">
				<ul class="icons">
					<li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
					<li><a href="#" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
					<li><a href="#" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
					<li><a href="#" class="icon brands fa-dribbble"><span class="label">Dribbble</span></a></li>
					<li><a href="#" class="icon solid fa-envelope"><span class="label">Email</span></a></li>
				</ul>
				<ul class="copyright">
					<li>&copy; Med City AI</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li><li><a href="terms_of_use.html" style="color: #999;">Terms</a> | <a href="privacy_policy.html" style="color: #999;">Privacy</a> | <a href="cookie_policy.html" style="color: #999;">Cookies</a></li>
				</ul>
			</footer>
		</div>

		<!-- Scripts -->
		<script src="assets/js/jquery.min.js"></script>
		<script src="assets/js/jquery.scrollex.min.js"></script>
		<script src="assets/js/jquery.scrolly.min.js"></script>
		<script src="assets/js/browser.min.js"></script>
		<script src="assets/js/breakpoints.min.js"></script>
		<script src="assets/js/util.js"></script>
		<script src="assets/js/main.js"></script>

		<script>
		// Application state
		let VarTot = 0, VarDay = 0, VarWeek = 0, VarMonth = 0;
		let currentPage = 1;
		let currentSearchQuery = '';
		const resultsPerPage = 50;

		// Modal functions
		function showAbstractModal(link) {
			const modalBg = document.getElementById('modalBg');
			const modalTitle = document.getElementById('modalTitle');
			const modalAbstract = document.getElementById('modalAbstract');
			
			const title = link.getAttribute('data-title');
			const abstract = link.getAttribute('data-abstract');
			const pmid = link.getAttribute('data-pmid');
			const authors = link.getAttribute('data-authors');
			const affiliations = link.getAttribute('data-affiliations');
			const llmSummary = link.getAttribute('data-llm-summary');

			// Title in black at top
			modalTitle.innerHTML = `<span style='color:#111;font-weight:800;font-size:1.3em;'>${title}</span>`;

			// Authors and affiliations
			let authorList = '';
			if (authors) {
				authorList += `<div style='margin:10px 0 18px 0;font-size:1em;color:#222;'><strong>Authors:</strong> ${authors.replace(/;/g, '; ')}</div>`;
			}
			if (affiliations) {
				authorList += `<div style='margin-bottom:18px;font-size:0.95em;color:#444;'><strong>Affiliations:</strong> ${affiliations.replace(/;/g, '; ')}</div>`;
			}

			// Start with authors
			let content = authorList;
			
			// Show AI-Generated Summary if available, otherwise show original abstract
			if (llmSummary && llmSummary.trim() !== '' && llmSummary !== 'No abstract available.') {
				content += `<div style="background: linear-gradient(135deg, #f0f7ff 0%, #e3f2fd 100%); padding: 20px; border-radius: 12px; margin-bottom: 24px; border-left: 4px solid #2196f3; box-shadow: 0 2px 8px rgba(33, 150, 243, 0.1);">`;
				content += `<div style="display: flex; align-items: center; margin-bottom: 12px;">`;
				content += `<span style="font-size: 24px; margin-right: 10px;"></span>`;
				content += `<h4 style="color: #1565c0; margin: 0; font-size: 16px; font-weight: 700;">AI-GENERATED PLAIN LANGUAGE SUMMARY</h4>`;
				content += `</div>`;
				content += `<p style="margin: 0 0 12px 0; line-height: 1.7; color: #1a237e; font-size: 15px;">${llmSummary}</p>`;
				content += `<div style="padding-top: 12px; border-top: 1px solid #bbdefb; margin-top: 12px;">`;
				content += `<p style="margin: 0; font-size: 12px; color: #546e7a; font-style: italic; line-height: 1.5;">`;
				content += `<strong> Disclaimer:</strong> This summary was generated by artificial intelligence and may contain inaccuracies or oversimplifications. `;
				content += `Please refer to the full publication for complete and accurate information. `;
				content += `This AI summary is provided for informational purposes only and should not be used for clinical decision-making.`;
				content += `</p>`;
				content += `</div>`;
				content += `</div>`;
			} else {
				// Fallback to original abstract if no LLM summary
				content += `<h4 style="color: #0056a3; border-bottom: 2px solid #0056a3; padding-bottom: 8px; margin-bottom: 12px;">Abstract</h4>`;
				content += `<p style="line-height: 1.6;">${abstract}</p>`;
			}

			modalAbstract.innerHTML = content;
			modalBg.style.display = 'flex';

			// Prevent scroll to top
			if (window.scrollY) {
				setTimeout(() => window.scrollTo({top: window.scrollY}), 0);
			}
		}

		function closeModal() {
			const modalBg = document.getElementById('modalBg');
			modalBg.style.display = 'none';
			modalBg.setAttribute('aria-hidden', 'true');
			
			// Return focus to the element that opened the modal
			if (window.lastFocusedElement) {
				window.lastFocusedElement.focus();
			}
		}
		
		// Author Bibliography Modal Functions
		async function showAuthorBibliography(authorName) {
			const modal = document.getElementById('authorModal');
			const title = document.getElementById('authorModalTitle');
			const loading = document.getElementById('authorModalLoading');
			const bibliography = document.getElementById('authorBibliography');
			
			// Store focus for accessibility
			window.lastFocusedElement = document.activeElement;
			
			// Show modal and loading state
			modal.style.display = 'flex';
			modal.setAttribute('aria-hidden', 'false');
			title.textContent = `Publications by ${authorName}`;
			loading.style.display = 'block';
			bibliography.innerHTML = '';
			
			try {
				// Build query for this author + Rochester affiliation
				const query = `(${authorName}[Author]) AND (Rochester[AD] AND (Minnesota[AD] OR MN[AD]))`;
				
				// Search PubMed
				const searchUrl = `https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=pubmed&term=${encodeURIComponent(query)}&retmax=100&retmode=json&sort=pub+date`;
				const searchResponse = await fetch(searchUrl);
				const searchData = await searchResponse.json();
				
				const articleIds = searchData.esearchresult.idlist;
				
				if (articleIds.length === 0) {
					bibliography.innerHTML = '<li style="color: #7f8c8d; text-align: center; padding: 40px;">No publications found for this author.</li>';
					loading.style.display = 'none';
					return;
				}
				
				// Fetch article details
				const fetchUrl = `https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=${articleIds.join(',')}&retmode=xml`;
				const fetchResponse = await fetch(fetchUrl);
				const xmlText = await fetchResponse.text();
				
				// Parse XML
				const parser = new DOMParser();
				const xmlDoc = parser.parseFromString(xmlText, 'text/xml');
				const articles = parseAuthorArticles(xmlDoc);
				
				// Sort by year (most recent first)
				articles.sort((a, b) => {
					const yearA = parseInt(a.year) || 0;
					const yearB = parseInt(b.year) || 0;
					return yearB - yearA;
				});
				
				// Build bibliography HTML
				let bibliographyHTML = '';
				articles.forEach(article => {
					const citation = generateMLACitation(article);
					bibliographyHTML += `<li>${citation}</li>`;
				});
				
				bibliography.innerHTML = bibliographyHTML;
				loading.style.display = 'none';
				
			} catch (error) {
				console.error('Error fetching author bibliography:', error);
				bibliography.innerHTML = '<li style="color: #e74c3c; text-align: center; padding: 40px;">Error loading publications. Please try again.</li>';
				loading.style.display = 'none';
			}
		}
		
		function parseAuthorArticles(xmlDoc) {
			const articles = [];
			const articleNodes = xmlDoc.querySelectorAll('PubmedArticle');
			
			articleNodes.forEach(articleNode => {
				const article = {};
				
				// PMID
				const pmidNode = articleNode.querySelector('PMID');
				article.pmid = pmidNode ? pmidNode.textContent : '';
				article.url = `https://pubmed.ncbi.nlm.nih.gov/${article.pmid}/`;
				
				// Title
				const titleNode = articleNode.querySelector('ArticleTitle');
				article.title = titleNode ? titleNode.textContent : 'No title available';
				
				// Authors
				const authorNodes = articleNode.querySelectorAll('Author');
				const authorNames = [];
				authorNodes.forEach(authorNode => {
					const lastName = authorNode.querySelector('LastName')?.textContent || '';
					const initials = authorNode.querySelector('Initials')?.textContent || '';
					if (lastName) {
						authorNames.push(`${lastName} ${initials}`);
					}
				});
				article.authors = authorNames.length > 0 ? authorNames.slice(0, 3).join(', ') + (authorNames.length > 3 ? ', et al.' : '') : 'Unknown Authors';
				
				// Journal
				const journalNode = articleNode.querySelector('Title');
				article.journal = journalNode ? journalNode.textContent : 'Unknown Journal';
				
				// Publication Year
				const yearNode = articleNode.querySelector('PubDate Year');
				article.year = yearNode ? yearNode.textContent : 'n.d.';
				
				articles.push(article);
			});
			
			return articles;
		}
		
		function generateMLACitation(article) {
			return `${article.authors}. "${article.title}" <span class="pub-journal">${article.journal}</span>, <span class="pub-year">${article.year}</span>. <a href="${article.url}" target="_blank" style="color: #3498db;">PubMed</a>`;
		}
		
		function closeAuthorModal() {
			const modal = document.getElementById('authorModal');
			modal.style.display = 'none';
			modal.setAttribute('aria-hidden', 'true');
			
			// Return focus to triggering element
			if (window.lastFocusedElement) {
				window.lastFocusedElement.focus();
			}
		}
		
		// Accessibility: Focus trap for modal
		function trapFocus(element) {
			const focusableElements = element.querySelectorAll(
				'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
			);
			const firstFocusable = focusableElements[0];
			const lastFocusable = focusableElements[focusableElements.length - 1];

			element.addEventListener('keydown', function(e) {
				if (e.key === 'Tab') {
					if (e.shiftKey) {
						if (document.activeElement === firstFocusable) {
							e.preventDefault();
							lastFocusable.focus();
						}
					} else {
						if (document.activeElement === lastFocusable) {
							e.preventDefault();
							firstFocusable.focus();
						}
					}
				}
			});
		}
		
		// Accessibility: Keyboard support for modal
		document.addEventListener('keydown', function(e) {
			const modalBg = document.getElementById('modalBg');
			const authorModal = document.getElementById('authorModal');
			
			if (e.key === 'Escape') {
				if (modalBg.style.display === 'flex') {
					closeModal();
				} else if (authorModal.style.display === 'flex') {
					closeAuthorModal();
				}
			}
		});
		
		// Update showAbstractModal to handle focus and ARIA
		const originalShowAbstractModal = showAbstractModal;
		showAbstractModal = function(link) {
			// Store the element that triggered the modal
			window.lastFocusedElement = document.activeElement;
			
			// Call original function
			originalShowAbstractModal(link);
			
			// Update ARIA and focus
			const modalBg = document.getElementById('modalBg');
			const modalClose = document.getElementById('modalClose');
			modalBg.setAttribute('aria-hidden', 'false');
			
			// Set up focus trap
			trapFocus(modalBg);
			
			// Focus the close button
			setTimeout(() => modalClose.focus(), 100);
		};

		// Statistics loading
		async function loadStatistics() {
			try {
				const response = await fetch('./database/summary_stats.txt');
				if (!response.ok) throw new Error('Statistics file not found');
				
				const statsText = await response.text();
				statsText.split('\n').forEach(line => {
					const [key, value] = line.split('=');
					if (key && value) {
						const trimmedKey = key.trim();
						const numValue = parseInt(value.trim());
						
						switch(trimmedKey) {
							case 'VarTot': VarTot = numValue; break;
							case 'VarDay': VarDay = numValue; break;
							case 'VarWeek': VarWeek = numValue; break;
							case 'VarMonth': VarMonth = numValue; break;
						}
					}
				});

				// Update UI
				document.getElementById("VarTot").textContent = VarTot;
				document.getElementById("VarDay").textContent = VarDay;
				document.getElementById("VarWeek").textContent = VarWeek;
				document.getElementById("VarMonth").textContent = VarMonth;
				
				// Update live count in hero banner
				document.getElementById("live-count").textContent = VarDay;
			} catch (err) {
				console.error('Error loading statistics:', err);
			}
		}

		// Global variables for CSV data
		let allArticlesData = [];
		let filteredArticlesData = [];
		let currentlyFlippedCard = null;

		// Function to flip card and match heights (with keyboard support)
		function flipCard(container, event) {
			// Support both click and keyboard events
			if (event.type === 'keydown' && event.key !== 'Enter' && event.key !== ' ') {
				return; // Only respond to Enter or Space key
			}
			
			event.stopPropagation();
			event.preventDefault(); // Prevent space from scrolling
			
			const cardFront = container.querySelector('.card-front');
			const cardBack = container.querySelector('.card-back');
			
			// If there's a currently flipped card and it's not this one, flip it back
			if (currentlyFlippedCard && currentlyFlippedCard !== container && currentlyFlippedCard.classList.contains('flipped')) {
				currentlyFlippedCard.classList.remove('flipped');
			}
			
			if (!container.classList.contains('flipped')) {
				// Flipping to back - capture front height and apply to back
				const frontHeight = cardFront.offsetHeight;
				cardBack.style.height = frontHeight + 'px';
				currentlyFlippedCard = container;
			} else {
				currentlyFlippedCard = null;
			}
			
			container.classList.toggle('flipped');
		}

		// Load CSV data
		async function loadCSVData() {
			try {
				const response = await fetch('pubmed_data.csv');
				if (!response.ok) throw new Error('CSV file not found');
				
				const csvText = await response.text();
				const lines = csvText.split('\n');
				
				// Parse header
				const headers = lines[0].split(',').map(h => h.trim().replace(/^"|"$/g, ''));
				
				// Parse data rows
				allArticlesData = [];
				for (let i = 1; i < lines.length; i++) {
					if (!lines[i].trim()) continue;
					
					const row = parseCSVLine(lines[i]);
					if (row.length === headers.length) {
						const article = {};
						headers.forEach((header, index) => {
							article[header] = row[index];
						});
						allArticlesData.push(article);
					}
				}
				
				console.log(`Loaded ${allArticlesData.length} articles from CSV`);
				return allArticlesData;
			} catch (error) {
				console.error('Error loading CSV:', error);
				return [];
			}
		}

		// Populate department filter dropdown - NO LONGER NEEDED (using links instead)
		// function populateDepartmentFilter() { ... }


		// Parse CSV line handling quoted fields
		function parseCSVLine(line) {
			const result = [];
			let current = '';
			let inQuotes = false;
			
			for (let i = 0; i < line.length; i++) {
				const char = line[i];
				
				if (char === '"') {
					inQuotes = !inQuotes;
				} else if (char === ',' && !inQuotes) {
					result.push(current.trim());
					current = '';
				} else {
					current += char;
				}
			}
			result.push(current.trim());
			
			return result;
		}

		// Escape HTML for data attributes
		function escapeHtml(text) {
			const div = document.createElement('div');
			div.textContent = text;
			return div.innerHTML;
		}

		// PubMed data display with search and pagination (now using CSV data)
		async function fetchPubMedResults(searchQuery = '', page = 1, departmentFilter = '') {
			currentSearchQuery = searchQuery;
			currentPage = page;
			
			// Ensure data is loaded
			if (allArticlesData.length === 0) {
				await loadCSVData();
			}
			
			// Filter articles based on search query
			if (searchQuery && searchQuery.trim() !== '') {
				const query = searchQuery.trim().toLowerCase();
				filteredArticlesData = allArticlesData.filter(article => {
					return article.title.toLowerCase().includes(query) ||
						   article.abstract.toLowerCase().includes(query) ||
						   article.authors.toLowerCase().includes(query) ||
						   article.journal.toLowerCase().includes(query);
				});
			} else {
				// No search query, show all articles
				filteredArticlesData = [...allArticlesData];
			}
			
			// Apply department filter if selected
			if (departmentFilter && departmentFilter.trim() !== '') {
				// Define category mappings
				const categoryKeywords = {
					'Surgery': ['surgery', 'surgical', 'cardiovascular surgery', 'cardiac surgery', 'thoracic surgery', 'neurosurgery', 'orthopedic surgery', 'plastic surgery', 'vascular surgery', 'transplant surgery'],
					'Cardiology': ['cardiology', 'cardiovascular', 'cardiac', 'heart'],
					'Neurology': ['neurology', 'neurological', 'neuroscience', 'neuroimaging', 'brain'],
					'Oncology': ['oncology', 'cancer', 'hematology', 'medical oncology', 'leukemia', 'lymphoma'],
					'Radiation Oncology': ['radiation oncology', 'radiation', 'radiotherapy'],
					'Radiology': ['radiology', 'imaging', 'diagnostic radiology', 'interventional radiology'],
					'Pediatrics': ['pediatrics', 'pediatric', 'child', 'children', 'neonatal'],
					'Internal Medicine': ['internal medicine', 'medicine', 'general medicine'],
					'Psychiatry': ['psychiatry', 'psychiatric', 'mental health', 'psychology'],
					'AI/ML/DL': ['artificial intelligence', 'machine learning', 'deep learning', 'neural network', 'ai', 'ml', 'dl',
						'generative ai', 'large language model', 'llm', 'chatgpt', 'gpt', 'generative', 'gen ai'
					]
				};
				
				filteredArticlesData = filteredArticlesData.filter(article => {
					const affiliationsList = article.affiliations ? article.affiliations.split('|') : [];
					
					// Check if any affiliation contains a department that matches the selected category
					return affiliationsList.some(affiliation => {
						const deptMatch = affiliation.match(/(?:Department|Division|Center|Institute|Clinic|Unit|Section)\s+of\s+([^,\.]+)/i);
						if (deptMatch) {
							const deptName = deptMatch[1].trim().toLowerCase();
							
							// Check if department name contains any keyword from the selected category
							const keywords = categoryKeywords[departmentFilter] || [];
							return keywords.some(keyword => deptName.includes(keyword));
						}
						return false;
					});
				});
			}
			
			// Check if we have results
			if (filteredArticlesData.length === 0) {
				document.getElementById("pubmed-results").innerHTML = "<p style='text-align:center; padding:40px; color:#666;'>No results found. Try a different search term.</p>";
				document.getElementById("pagination-controls").style.display = 'none';
				return;
			}
			
			// Calculate pagination
			const totalPages = Math.ceil(filteredArticlesData.length / resultsPerPage);
			const startIdx = (page - 1) * resultsPerPage;
			const endIdx = Math.min(startIdx + resultsPerPage, filteredArticlesData.length);
			const pageArticles = filteredArticlesData.slice(startIdx, endIdx);
			
			// Show/hide pagination controls
			if (filteredArticlesData.length > resultsPerPage) {
				document.getElementById("pagination-controls").style.display = 'block';
				document.getElementById("pageInfo").textContent = `Page ${page} of ${totalPages} (${filteredArticlesData.length} results)`;
				document.getElementById("prevPage").disabled = page === 1;
				document.getElementById("nextPage").disabled = page === totalPages;
				document.getElementById("prevPage").style.opacity = page === 1 ? '0.5' : '1';
				document.getElementById("nextPage").style.opacity = page === totalPages ? '0.5' : '1';
			} else {
				document.getElementById("pagination-controls").style.display = 'none';
			}
			
			// Get current date for NEW badge logic
			const now = new Date();
			const twoDaysAgo = new Date(now.getTime() - (2 * 24 * 60 * 60 * 1000));
			
			// Build results HTML from CSV data
			let resultsHTML = '';
			
			pageArticles.forEach(article => {
				const pmid = article.pmid;
				const title = article.title;
				const abstract = article.abstract;
				const journal = article.journal;
				const pubdate = article.pubdate;
				const url = article.url;
				const llmSummary = article.llm_summary || '';
				
				// Parse publication date to check if NEW
				const year = article.year;
				const month = article.month;
				const day = article.day;
				
				let articleDate = null;
				const monthNames = ["", "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
				if (year && month && day) {
					const monthNum = monthNames.indexOf(month);
					if (monthNum > 0) {
						articleDate = new Date(year, monthNum - 1, day);
					}
				} else if (year && month) {
					const monthNum = monthNames.indexOf(month);
					if (monthNum > 0) {
						articleDate = new Date(year, monthNum - 1, 1);
					}
				}
				
				// Determine if article is NEW (within last 2 days)
				const isNew = articleDate && articleDate >= twoDaysAgo;
				
				// Parse authors (pipe-separated in CSV)
				const authorsList = article.authors ? article.authors.split('|') : [];
				const rochesterAuthorsList = article.rochester_authors ? article.rochester_authors.split('|') : [];
				
				// Format authors for display
				let authorsHtml = "";
				if (article.authors_display) {
					authorsHtml = article.authors_display;
					// Make Rochester authors clickable
					rochesterAuthorsList.forEach(rochAuthor => {
						if (rochAuthor) {
							const escapedAuthor = rochAuthor.replace(/'/g, "\\'");
							authorsHtml = authorsHtml.replace(
								rochAuthor, 
								`<span class="roch-author" onclick="showAuthorBibliography('${escapedAuthor}')" tabindex="0" role="button" aria-label="View publications by ${escapedAuthor}" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();showAuthorBibliography('${escapedAuthor}');}">${rochAuthor}</span>`
							);
						}
					});
				}
				
				// Parse affiliations (pipe-separated in CSV)
				const affiliationsList = article.affiliations ? article.affiliations.split('|') : [];
				
				// Extract department/division - prioritize first Rochester author's department
				let departmentText = '';
				
				// First, try to get department from first Rochester author
				if (rochesterAuthorsList.length > 0 && affiliationsList.length > 0) {
					const firstRochAuthor = rochesterAuthorsList[0];
					const authorIndex = authorsList.indexOf(firstRochAuthor);
					
					if (authorIndex >= 0 && authorIndex < affiliationsList.length) {
						const affiliation = affiliationsList[authorIndex];
						const deptMatch = affiliation.match(/(?:Department|Division|Center|Institute|Clinic|Unit|Section)\s+of\s+([^,\.]+)/i);
						if (deptMatch) {
							departmentText = deptMatch[1].trim();
						}
					}
				}
				
				// If no department found from first Rochester author, check all affiliations
				if (!departmentText && affiliationsList.length > 0) {
					for (let i = 0; i < affiliationsList.length; i++) {
						const affiliation = affiliationsList[i];
						const deptMatch = affiliation.match(/(?:Department|Division|Center|Institute|Clinic|Unit|Section)\s+of\s+([^,\.]+)/i);
						if (deptMatch) {
							departmentText = deptMatch[1].trim();
							break; // Use the first match found
						}
					}
				}
				
				// Default to "Medicine" if no department found
				if (!departmentText) {
					departmentText = 'Medicine';
				}
				
				const citation = `${journal}. ${pubdate}.`;

				// Build card with flip effect
				const hasSummary = llmSummary && llmSummary.trim() !== '' && llmSummary !== 'No abstract available.';
				
				resultsHTML += `
					<div class="result-item">
						<div class="card-flip-container" role="group" aria-label="${title.substring(0, 100)}...">
							<!-- Front of card -->
							<div class="card-face card-front" onclick="flipCard(this.closest('.card-flip-container'), event);" style="cursor: pointer;">
								${isNew ? '<div class="new-tab">NEW</div>' : ''}
								${departmentText ? `<div class="department-badge">${departmentText}</div>` : ''}
								<br>
								<a href="#" class="result-title" 
								   onclick="event.preventDefault(); event.stopPropagation(); flipCard(this.closest('.card-flip-container'), event);" 
								   onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();flipCard(this.closest('.card-flip-container'), event);}"
								   tabindex="0"
								   role="button"
								   aria-label="Click to view AI summary of: ${title}">${title}</a>
								<div class="result-authors" onclick="event.stopPropagation();">${authorsHtml}</div>
								<div class="result-citation"><em>${citation}</em></div>
								<div style="margin-top: 8px; margin-bottom: 10px;">
									<a href="${url}" target="_blank" onclick="event.stopPropagation();" style="color: #0056a3; text-decoration: none; font-size: 14px; font-weight: 500;">
										View on PubMed 
									</a>
								</div>
								<div class="share-buttons" role="group" aria-label="Share on social media" onclick="event.stopPropagation();">
									<a href="https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}" class="facebook" target="_blank" aria-label="Share on Facebook">
										<i class="icon brands fa-facebook-f" aria-hidden="true"></i> 
									</a>
									<a href="https://twitter.com/intent/tweet?url=${encodeURIComponent(url)}&text=${encodeURIComponent(title)}" class="twitter" target="_blank" aria-label="Share on Twitter">
										<i class="icon brands fa-twitter" aria-hidden="true"></i> 
									</a>
									<a href="https://www.linkedin.com/shareArticle?mini=true&url=${encodeURIComponent(url)}&title=${encodeURIComponent(title)}" class="linkedin" target="_blank" aria-label="Share on LinkedIn">
										<i class="icon brands fa-linkedin" aria-hidden="true"></i> 
									</a>
								</div>
							</div>
							
							<!-- Back of card (AI Summary) -->
							${hasSummary ? `
							<div class="card-face card-back" onclick="flipCard(this.closest('.card-flip-container'), event);" style="cursor: pointer;">
								<div class="card-back-header">
									<h4 style="color: #1565c0; margin: 0; font-size: 16px; font-weight: 700; cursor: pointer;"
									    onclick="event.stopPropagation(); flipCard(this.closest('.card-flip-container'), event);"
									    onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();flipCard(this.closest('.card-flip-container'), event);}"
									    tabindex="0"
									    role="button"
									    aria-label="Click to return to article details">
										AI SUMMARY <span style="font-size: 14px;"></span>
									</h4>
								</div>
								<div class="card-back-content">
									<div class="card-back-summary">${llmSummary}</div>
									<div class="card-back-disclaimer">
										<p style="margin: 0 0 10px 0; font-size: 11px; color: #546e7a; font-style: italic; line-height: 1.4;">
											This summary was generated by AI and may contain inaccuracies. Refer to the full publication for accurate information.
										</p>
										<a href="${url}" target="_blank" onclick="event.stopPropagation();" style="color: #0056a3; text-decoration: none; font-size: 14px; font-weight: 500;">
											View on PubMed 
										</a>
									</div>
								</div>
							</div>
							` : ''}
						</div>
					</div>
				`;
			});

			document.getElementById("pubmed-results").innerHTML = `<div class="results">${resultsHTML}</div>`;
			
			// Scroll to top of results after page change
			if (page > 1) {
				document.getElementById("pubmed-results").scrollIntoView({ behavior: 'smooth', block: 'start' });
			}
		}

		// Function to handle multiple department selections from sidebar
		async function fetchPubMedResultsMultiple(searchQuery = '', page = 1, departmentFilters = []) {
			currentSearchQuery = searchQuery;
			currentPage = page;
			
			// Ensure data is loaded
			if (allArticlesData.length === 0) {
				await loadCSVData();
			}
			
			// Start with all articles
			filteredArticlesData = [...allArticlesData];
			
			// Apply multiple department filters if selected
			if (departmentFilters.length > 0) {
				const categoryKeywords = {
					'Surgery': ['surgery', 'surgical', 'cardiovascular surgery', 'cardiac surgery', 'thoracic surgery', 'neurosurgery', 'orthopedic surgery', 'plastic surgery', 'vascular surgery', 'transplant surgery'],
					'Cardiology': ['cardiology', 'cardiovascular', 'cardiac', 'heart'],
					'Neurology': ['neurology', 'neurological', 'neuroscience', 'neuroimaging', 'brain'],
					'Oncology': ['oncology', 'cancer', 'hematology', 'medical oncology', 'leukemia', 'lymphoma'],
					'Radiation Oncology': ['radiation oncology', 'radiation', 'radiotherapy'],
					'Radiology': ['radiology', 'imaging', 'diagnostic radiology', 'interventional radiology'],
					'Pediatrics': ['pediatrics', 'pediatric', 'child', 'children', 'neonatal'],
					'Internal Medicine': ['internal medicine', 'medicine', 'general medicine'],
					'Psychiatry': ['psychiatry', 'psychiatric', 'mental health', 'psychology'],
					'AI/ML/DL & Generative AI': [
						'artificial intelligence', 'machine learning', 'deep learning', 'neural network', 'ai', 'ml', 'dl', 'data science',
						'generative ai', 'large language model', 'llm', 'chatgpt', 'gpt', 'generative', 'gen ai'
					]
				};
				
				filteredArticlesData = filteredArticlesData.filter(article => {
					const affiliationsList = article.affiliations ? article.affiliations.split('|') : [];
					
					// Check if article matches ANY of the selected departments
					return departmentFilters.some(selectedDept => {
						return affiliationsList.some(affiliation => {
							const deptMatch = affiliation.match(/(?:Department|Division|Center|Institute|Clinic|Unit|Section)\s+of\s+([^,\.]+)/i);
							if (deptMatch) {
								const deptName = deptMatch[1].trim().toLowerCase();
								
								const keywords = categoryKeywords[selectedDept] || [];
								return keywords.some(keyword => deptName.includes(keyword));
							}
							return false;
						});
					});
				});
			}
			
			// Display results (reuse same pagination/display logic)
			displayFilteredResults(page);
		}

		// Shared function to display filtered results with pagination
		function displayFilteredResults(page) {
			// Check if we have results
			if (filteredArticlesData.length === 0) {
				document.getElementById("pubmed-results").innerHTML = "<p style='text-align:center; padding:40px; color:#666;'>No results found. Try a different filter.</p>";
				document.getElementById("pagination-controls").style.display = 'none';
				return;
			}
			
			// Calculate pagination
			const totalPages = Math.ceil(filteredArticlesData.length / resultsPerPage);
			const startIdx = (page - 1) * resultsPerPage;
			const endIdx = Math.min(startIdx + resultsPerPage, filteredArticlesData.length);
			const pageArticles = filteredArticlesData.slice(startIdx, endIdx);
			
			// Show/hide pagination controls
			if (filteredArticlesData.length > resultsPerPage) {
				document.getElementById("pagination-controls").style.display = 'block';
				document.getElementById("pageInfo").textContent = `Page ${page} of ${totalPages} (${filteredArticlesData.length} results)`;
				document.getElementById("prevPage").disabled = page === 1;
				document.getElementById("nextPage").disabled = page === totalPages;
				document.getElementById("prevPage").style.opacity = page === 1 ? '0.5' : '1';
				document.getElementById("nextPage").style.opacity = page === totalPages ? '0.5' : '1';
			} else {
				document.getElementById("pagination-controls").style.display = 'none';
			}
			
			// Get current date for NEW badge logic
			const now = new Date();
			const twoDaysAgo = new Date(now.getTime() - (2 * 24 * 60 * 60 * 1000));
			
			// Build results HTML from CSV data
			let resultsHTML = '';
			
			pageArticles.forEach(article => {
				const pmid = article.pmid;
				const title = article.title;
				const abstract = article.abstract;
				const journal = article.journal;
				const pubdate = article.pubdate;
				const url = article.url;
				const llmSummary = article.llm_summary || '';
				
				// Parse publication date to check if NEW
				const year = article.year;
				const month = article.month;
				const day = article.day;
				
				let articleDate = null;
				const monthNames = ["", "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
				if (year && month && day) {
					const monthNum = monthNames.indexOf(month);
					if (monthNum > 0) {
						articleDate = new Date(year, monthNum - 1, day);
					}
				} else if (year && month) {
					const monthNum = monthNames.indexOf(month);
					if (monthNum > 0) {
						articleDate = new Date(year, monthNum - 1, 1);
					}
				}
				
				// Determine if article is NEW (within last 2 days)
				const isNew = articleDate && articleDate >= twoDaysAgo;
				
				// Parse authors (pipe-separated in CSV)
				const authorsList = article.authors ? article.authors.split('|') : [];
				const rochesterAuthorsList = article.rochester_authors ? article.rochester_authors.split('|') : [];
				
				// Format authors for display
				let authorsHtml = "";
				if (article.authors_display) {
					authorsHtml = article.authors_display;
					// Make Rochester authors clickable
					rochesterAuthorsList.forEach(rochAuthor => {
						if (rochAuthor) {
							const escapedAuthor = rochAuthor.replace(/'/g, "\\'");
							authorsHtml = authorsHtml.replace(
								rochAuthor, 
								`<span class="roch-author" onclick="showAuthorBibliography('${escapedAuthor}')" tabindex="0" role="button" aria-label="View publications by ${escapedAuthor}" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();showAuthorBibliography('${escapedAuthor}');}">${rochAuthor}</span>`
							);
						}
					});
				}
				
				// Parse affiliations (pipe-separated in CSV)
				const affiliationsList = article.affiliations ? article.affiliations.split('|') : [];
				
				// Extract department/division - prioritize first Rochester author's department
				let departmentText = '';
				
				// First, try to get department from first Rochester author
				if (rochesterAuthorsList.length > 0 && affiliationsList.length > 0) {
					const firstRochAuthor = rochesterAuthorsList[0];
					const authorIndex = authorsList.indexOf(firstRochAuthor);
					
					if (authorIndex >= 0 && authorIndex < affiliationsList.length) {
						const affiliation = affiliationsList[authorIndex];
						const deptMatch = affiliation.match(/(?:Department|Division|Center|Institute|Clinic|Unit|Section)\s+of\s+([^,\.]+)/i);
						if (deptMatch) {
							departmentText = deptMatch[1].trim();
						}
					}
				}
				
				// If no department found from first Rochester author, check all affiliations
				if (!departmentText && affiliationsList.length > 0) {
					for (let i = 0; i < affiliationsList.length; i++) {
						const affiliation = affiliationsList[i];
						const deptMatch = affiliation.match(/(?:Department|Division|Center|Institute|Clinic|Unit|Section)\s+of\s+([^,\.]+)/i);
						if (deptMatch) {
							departmentText = deptMatch[1].trim();
							break; // Use the first match found
						}
					}
				}
				
				// Default to "Medicine" if no department found
				if (!departmentText) {
					departmentText = 'Medicine';
				}
				
				const citation = `${journal}. ${pubdate}.`;

				// Build card with flip effect
				const hasSummary = llmSummary && llmSummary.trim() !== '' && llmSummary !== 'No abstract available.';
				
				resultsHTML += `
					<div class="result-item">
						<div class="card-flip-container" role="group" aria-label="${title.substring(0, 100)}...">
							<!-- Front of card -->
							<div class="card-face card-front" onclick="flipCard(this.closest('.card-flip-container'), event);" style="cursor: pointer;">
								${isNew ? '<div class="new-tab">NEW</div>' : ''}
								${departmentText ? `<div class="department-badge">${departmentText}</div>` : ''}
								<br>
								<a href="#" class="result-title" 
								   onclick="event.preventDefault(); event.stopPropagation(); flipCard(this.closest('.card-flip-container'), event);" 
								   onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();flipCard(this.closest('.card-flip-container'), event);}"
								   tabindex="0"
								   role="button"
								   aria-label="Click to view AI summary of: ${title}">${title}</a>
								<div class="result-authors" onclick="event.stopPropagation();">${authorsHtml}</div>
								<div class="result-citation"><em>${citation}</em></div>
								<div style="margin-top: 8px; margin-bottom: 10px;">
									<a href="${url}" target="_blank" onclick="event.stopPropagation();" style="color: #0056a3; text-decoration: none; font-size: 14px; font-weight: 500;">
										View on PubMed 
									</a>
								</div>
								<div class="share-buttons" role="group" aria-label="Share on social media" onclick="event.stopPropagation();">
									<a href="https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}" class="facebook" target="_blank" aria-label="Share on Facebook">
										<i class="icon brands fa-facebook-f" aria-hidden="true"></i> 
									</a>
									<a href="https://twitter.com/intent/tweet?url=${encodeURIComponent(url)}&text=${encodeURIComponent(title)}" class="twitter" target="_blank" aria-label="Share on Twitter">
										<i class="icon brands fa-twitter" aria-hidden="true"></i> 
									</a>
									<a href="https://www.linkedin.com/shareArticle?mini=true&url=${encodeURIComponent(url)}&title=${encodeURIComponent(title)}" class="linkedin" target="_blank" aria-label="Share on LinkedIn">
										<i class="icon brands fa-linkedin" aria-hidden="true"></i> 
									</a>
								</div>
							</div>
							
							<!-- Back of card (AI Summary) -->
							${hasSummary ? `
							<div class="card-face card-back" onclick="flipCard(this.closest('.card-flip-container'), event);" style="cursor: pointer;">
								<div class="card-back-header">
									<h4 style="color: #1565c0; margin: 0; font-size: 16px; font-weight: 700; cursor: pointer;"
									    onclick="event.stopPropagation(); flipCard(this.closest('.card-flip-container'), event);"
									    onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();flipCard(this.closest('.card-flip-container'), event);}"
									    tabindex="0"
									    role="button"
									    aria-label="Click to return to article details">
										AI SUMMARY <span style="font-size: 14px;"></span>
									</h4>
								</div>
								<div class="card-back-content">
									<div class="card-back-summary">${llmSummary}</div>
									<div class="card-back-disclaimer">
										<p style="margin: 0 0 10px 0; font-size: 11px; color: #546e7a; font-style: italic; line-height: 1.4;">
											This summary was generated by AI and may contain inaccuracies. Refer to the full publication for accurate information.
										</p>
										<a href="${url}" target="_blank" onclick="event.stopPropagation();" style="color: #0056a3; text-decoration: none; font-size: 14px; font-weight: 500;">
											View on PubMed 
										</a>
									</div>
								</div>
							</div>
							` : ''}
						</div>
					</div>
				`;
			});

			document.getElementById("pubmed-results").innerHTML = `<div class="results">${resultsHTML}</div>`;
			
			// Scroll to top of results after page change
			if (page > 1) {
				document.getElementById("pubmed-results").scrollIntoView({ behavior: 'smooth', block: 'start' });
			}
		}

		// Initialize application
		document.addEventListener('DOMContentLoaded', function() {
			// Set up modal event listeners
			const modalBg = document.getElementById('modalBg');
			const modalClose = document.getElementById('modalClose');
            
			modalClose.addEventListener('click', closeModal);
			modalBg.addEventListener('click', function(e) {
				if (e.target === modalBg) closeModal();
			});
			
			// Set up author modal close event listener
			const authorModal = document.getElementById('authorModal');
			authorModal.addEventListener('click', function(e) {
				if (e.target === authorModal) closeAuthorModal();
			});

			// Set up department filter
			let currentDepartmentFilter = '';
			let selectedDepartments = new Set(); // Track multiple selections from sidebar
			
			// Add click event listeners to department filter links (top)
			document.querySelectorAll('.dept-filter-link').forEach(link => {
				link.addEventListener('click', function(e) {
					e.preventDefault();
					
					// Remove active class from all links
					document.querySelectorAll('.dept-filter-link').forEach(l => l.classList.remove('active'));
					
					// Add active class to clicked link
					this.classList.add('active');
					
					// Get department from data attribute
					currentDepartmentFilter = this.getAttribute('data-dept');
					
					// Clear sidebar checkboxes when using top filter
					document.querySelectorAll('.dept-checkbox').forEach(cb => cb.checked = false);
					selectedDepartments.clear();
					
					// Fetch filtered results
					fetchPubMedResults('', 1, currentDepartmentFilter);
				});
			});
			
			// Add change event listeners to sidebar checkboxes
			document.querySelectorAll('.dept-checkbox').forEach(checkbox => {
				checkbox.addEventListener('change', function() {
					if (this.checked) {
						selectedDepartments.add(this.value);
					} else {
						selectedDepartments.delete(this.value);
					}
					
					// Clear top filter active state when using sidebar
					document.querySelectorAll('.dept-filter-link').forEach(l => l.classList.remove('active'));
					currentDepartmentFilter = '';
					
					// Fetch filtered results with multiple departments
					fetchPubMedResultsMultiple('', 1, Array.from(selectedDepartments));
				});
			});
			
			// Clear all filters button
			document.getElementById('clearFilters').addEventListener('click', function() {
				// Uncheck all checkboxes
				document.querySelectorAll('.dept-checkbox').forEach(cb => cb.checked = false);
				selectedDepartments.clear();
				
				// Reset top filter to "All"
				document.querySelectorAll('.dept-filter-link').forEach(l => l.classList.remove('active'));
				document.querySelector('.dept-filter-link[data-dept=""]').classList.add('active');
				currentDepartmentFilter = '';
				
				// Show all results
				fetchPubMedResults('', 1, '');
			});

			// Set up pagination event listeners
			document.getElementById('prevPage').addEventListener('click', function() {
				if (currentPage > 1) {
					// Check if using sidebar filters or top filter
					if (selectedDepartments.size > 0) {
						fetchPubMedResultsMultiple(currentSearchQuery, currentPage - 1, Array.from(selectedDepartments));
					} else {
						fetchPubMedResults(currentSearchQuery, currentPage - 1, currentDepartmentFilter);
					}
				}
			});

			document.getElementById('nextPage').addEventListener('click', function() {
				const totalPages = Math.ceil(filteredArticlesData.length / resultsPerPage);
				if (currentPage < totalPages) {
					// Check if using sidebar filters or top filter
					if (selectedDepartments.size > 0) {
						fetchPubMedResultsMultiple(currentSearchQuery, currentPage + 1, Array.from(selectedDepartments));
					} else {
						fetchPubMedResults(currentSearchQuery, currentPage + 1, currentDepartmentFilter);
					}
				}
			});

			// Load data and display results
			loadStatistics();
			loadCSVData().then(() => {
				fetchPubMedResults('', 1);
			});
		});
		</script>
	</body>
</html>